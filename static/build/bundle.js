var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r,s,a;function c(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function u(e){let t;return c(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function h(e){return null==e?"":e}function f(e,t,n){return e.set(n),t}function p(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function k(){return b(" ")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function A(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function $(){if(void 0===s){s=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){s=!0}}return s}function S(e,t,n){e.classList[n?"add":"remove"](t)}class U{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=w(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)g(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(v)}}function G(e){a=e}function M(){if(!a)throw new Error("Function called outside component initialization");return a}function E(e){M().$$.on_mount.push(e)}function L(e){M().$$.on_destroy.push(e)}function z(){const e=M();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const o=function(e,t,n=!1){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,!1,t),l}(t,n);l.slice().forEach((t=>{t.call(e,o)}))}}}const T=[],H=[],j=[],I=[],F=Promise.resolve();let N=!1;function D(e){j.push(e)}let P=!1;const q=new Set;function O(){if(!P){P=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];G(t),V(t.$$)}for(G(null),T.length=0;H.length;)H.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];q.has(t)||(q.add(t),t())}j.length=0}while(T.length);for(;I.length;)I.pop()();N=!1,P=!1,q.clear()}}function V(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const B=new Set;let R;function K(){R={r:0,c:[],p:R}}function W(){R.r||l(R.c),R=R.p}function Y(e,t){e&&e.i&&(B.delete(e),e.i(t))}function Q(e,t,n,l){if(e&&e.o){if(B.has(e))return;B.add(e),R.c.push((()=>{B.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}const X="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function J(e){e&&e.c()}function Z(e,n,i,r){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=e.$$;s&&s.m(n,i),r||D((()=>{const n=a.map(t).filter(o);c?c.push(...n):l(n),e.$$.on_mount=[]})),u.forEach(D)}function ee(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,t){-1===e.$$.dirty[0]&&(T.push(e),N||(N=!0,F.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(t,o,i,r,s,c,u,d=[-1]){const h=a;G(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:o.context||[]),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||h.$$.root};u&&u(f.root);let p=!1;if(f.ctx=i?i(t,o.props||{},((e,n,...l)=>{const o=l.length?l[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),p&&te(t,e)),n})):[],f.update(),p=!0,l(f.before_update),f.fragment=!!r&&r(f.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);f.fragment&&f.fragment.l(e),e.forEach(v)}else f.fragment&&f.fragment.c();o.intro&&Y(t.$$.fragment),Z(t,o.target,o.anchor,o.customElement),O()}G(h)}class le{$destroy(){ee(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function ie(t,n=e){let l;const o=new Set;function r(e){if(i(t,e)&&(t=e,l)){const e=!oe.length;for(const e of o)e[1](),oe.push(e,t);if(e){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(i,s=e){const a=[i,s];return o.add(a),1===o.size&&(l=n(r)||e),i(t),()=>{o.delete(a),0===o.size&&(l(),l=null)}}}}const re=ie("HOME"),se=ie({project_path:"",name:"",split_window:!1,show_filepicker:!0,show_menu:!1,show_optimizer:!1,screen_on_top_showing:!1,show_replace:!1,show_goto:!1,show_insert:!1,show_new_feature:!1,current_project:{},activeTab:0,activePanel:"left",left_panel:{current_tab:0,tabs:[]},right_panel:{current_tab:0,tabs:[]}});function ae(e){let t="http://127.0.0.1:6969/"+e;try{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n.response}catch(e){}}let ce,ue,de,he={};class fe{constructor(e){he=Object.assign({},e.data)}static getCurrentState(){return he}static loadNewData(e){he=Object.assign({},e);let t=0;he.Features.forEach((e=>{"CDS"==e.Kind&&null==e.label&&(e.label=0==t?"source":"ORF"+t.toString(),t++)}))}static getFeatures(){return[...he.Features]}static getSequence(){return he.DNA}static getName(){return he.Keywords}static updateFeatures(e){he.Features=e,qe.savePlasmidOnStore()}static addFeature(e,t,n){let l={Kind:"any",note:"",start:e,end:t,label:n};he.Features.push(l),qe.savePlasmidOnStore()}static updateSequence(e){he.DNA=e,qe.savePlasmidOnStore()}static getFeatureDataFromPosition(e){let t=e+1,n=[],l=he.Features;for(let e=0;e<l.length;e++){let o=l[e];void 0!==o.label&&(t>=o.start&&t<=o.end&&n.push(o))}return n}}let pe,ge,ve,me,we,be,ke,xe=0,Ce=0,ye=0,_e={unit:null,pos:null},Ae={m1:null,m2:null,num_shown:0};se.subscribe((e=>{pe=e}));class $e{constructor(e,t,n){ce=e,ue=t,de=n}static destroy(){console.log("destroy called"),ce=null}static loop(){pe.split_window||ce.loop()}static resize(e,t){pe.split_window||(ue=e,de=t)}static goToFeature(e){if(pe.split_window)return;let t=fe.getFeatures();for(let n=0;n<t.length;n++)if(t[n].label==e)return xe=t[n].start-1,void ce.loop()}static moveCursor(e){pe.split_window||("right"==e?_e.pos++:_e.pos--)}static addMarker(){if(!pe.split_window){switch(Ae.num_shown){case 0:Ae.m1=xe+ye*_e.unit+_e.pos,Ae.num_shown=1;break;case 1:Ae.m2=xe+ye*_e.unit+_e.pos,Ae.num_shown=2;break;case 2:Ae={m1:null,m2:null,num_shown:0},Ne.clearSelection()}_e={unit:null,pos:null},ce.loop()}}static updateMarkers(e,t){pe.split_window||(Ae.m1=e,Ae.m2=t,Ae.num_shown=2,this.goto(e,!1))}static goto(e,t){if(!pe.split_window)for(let n=0;n<fe.getSequence().length;n+=ye)if(n>e)return xe=n-ye,void(!0===t&&(_e.unit=0,_e.pos=e-xe))}static clearMarkers(){pe.split_window||(console.log(pe.split_window),Ae.m1=null,Ae.m2=null,Ae.num_shown=0,ce.loop())}static getSelected(){if(pe.split_window)return;return[Ae.m1,Ae.m2]}static getNumberOfMarkers(){if(!pe.split_window)return Ae.num_shown}mouseClicked(e){pe.screen_on_top_showing||(_e.unit=this.hitboxCheck(),-1!=_e.unit&&(_e.pos=this.mouse_to_sequence(_e.unit)))}scroll(e){if(pe.screen_on_top_showing)return;let t=fe.getSequence();switch(e){case"up":xe-ye>0?(xe-=ye,ce.loop()):(xe=0,ce.loop());break;case"down":if(xe+ye*Ce>t.length)return;xe+=ye,ce.loop()}}calculate_sequence_width(e,t){return 1.5*t+10*(e.length-1)+5}get_amino_inverse(e){switch(e){case"a":return"t";case"t":return"a";case"g":return"c";case"c":return"g";default:console.warn("Couldn't get inverse aminoacid")}}maxAminoacidsShown(e){return e.length}getCodon(e){let t=e.toUpperCase().replace(/T/g,"U");return"GCU, GCC, GCA, GCG ".includes(t)?"A":"AUU, AUC, AUA".includes(t)?"I":"CGU, CGC, CGA, CGG; AGA, AGG".includes(t)?"R":"CUU, CUC, CUA, CUG; UUA, UUG".includes(t)?"L":"AAU, AAC".includes(t)?"N":"AAA, AAG".includes(t)?"K":"GAU, GAC".includes(t)?"D":"AUG".includes(t)?"M":"UUU, UUC".includes(t)?"F":"UGU, UGC".includes(t)?"C":"CCU, CCC, CCA, CCG".includes(t)?"P":"CAA, CAG".includes(t)?"Q":"UCU, UCC, UCA, UCG; AGU, AGC".includes(t)?"S":"GAA, GAG".includes(t)?"E":"ACU, ACC, ACA, ACG".includes(t)?"T":"UGG".includes(t)?"W":"GGU, GGC, GGA, GGG".includes(t)?"G":"UAU, UAC".includes(t)?"Y":"CAU, CAC".includes(t)?"H":"GUU, GUC, GUA, GUG".includes(t)?"V":"UAA, UGA, UAG".includes(t)?"X":"0"}getCodonColor(e){switch(e){case"I":return"#FFE0E0";case"R":return"#ffc4d6";case"L":return"#ffac81";case"N":return"#eae4e9";case"K":return"#fff1e6";case"D":return"#fde2e4";case"M":return"#eeddd3";case"F":return"#e2ece9";case"C":return"#bee1e6";case"P":return"#f0efeb";case"Q":return"#dfe7fd";case"S":return"#cddafd";case"E":return"#BAE394";case"T":return"#a8e6cf";case"W":return"#cddcdf";case"G":return"#b8c0ff";case"Y":return"#4B8CA8";case"H":return"#71A7CD";case"V":return"#dfe7fd";case"A":return"#EFD581";case"X":return"#f08080";case"0":return"#fff";default:console.log("Error getting codon color")}}getMaxAminosPerLine(e){let t=ue-ue/10,n=this.maxAminoacidsShown(e);for(let e=0;e<n;e++){if(0+10*e+5>t+15)return e}}featureListContainsCDS(e){for(let t=0;t<e.length;t++)if("CDS"===e[t].Kind)return[!0,t];return[!1,-1]}renderUnit(e,t,n,l,o,i){let r=ue-ue/10,s=de/4,a=e,c=t+(s-s/10),u=this.maxAminoacidsShown(n);Ce++,ce.push(),ce.strokeWeight(2),ce.line(1.5*a,c,r+15,c),ce.textFont("Poppins"),ce.fill("#636363");let d=0;ce.strokeWeight(.5),ce.fill(120),ce.textAlign(ce.CENTER),ce.textSize(12);for(let e=0;e<u;e++){let t=1.5*a+10*e+5;if(l+e>=n.length)break;if(t>r+15){d=l+e;break}ce.text(this.get_amino_inverse(n[l+e]),t,c-12)}ce.fill(0);for(let e=0;e<u;e++){let t=1.5*a+10*e+5;if(t>r+15)break;if(ce.text(n[l+e],t,c-30),e%10==0){let t=1.5*a+10*(e+1)+5;ce.line(a+t,c,a+t,c+10),ce.text((l+e+2).toString(),a+t,c+22)}}ce.noStroke();for(let e=0;e<u;e+=3){let t=1.5*a+10*e;if(l+e>=n.length){ce.fill(230),ce.rect(t,c-61,3,60);break}let[i,s]=this.featureListContainsCDS(o);if(i){if(t>r)break;let o=this.getCodon(n[l+e]+n[l+e+1]+n[l+e+2]);ce.fill(parseInt(o[0]));let i=this.getCodonColor(o);ce.fill(i),ce.rect(t+1,c-60,30,15),ce.fill(12),ce.text(o,t+15,c-48)}}if(0!=Ae.num_shown)for(let e=0;e<u;e++){let t=1.5*a+10*e;if(t>r)break;Ae.num_shown>0&&l+e==Ae.m1&&(ce.fill("#4479FF"),ce.stroke("#4479FF"),ce.rect(t,c,1,-45),ce.triangle(t-3,c-45,t+4,c-45,t+1,c-40),ce.fill(255),ce.stroke(220),ce.rect(t-19,c+2,40,20,20),ce.fill(0),ce.textSize(9),ce.textAlign(ce.CENTER),ce.text(Ae.m1.toString(),t+1,c+15)),l+e==Ae.m2&&(ce.fill("#4479FF"),ce.stroke("#4479FF"),ce.rect(t,c,1,-45),ce.triangle(t-3,c-45,t+4,c-45,t+1,c-40),ce.fill(255),ce.stroke(220),ce.rect(t-19,c+2,40,20,20),ce.fill(0),ce.textSize(9),ce.textAlign(ce.CENTER),ce.text(Ae.m2.toString(),t+1,c+15)),ce.noStroke(),2==Ae.num_shown&&l+e>=Ae.m1&&l+e<Ae.m2&&(ce.fill(68,121,255,23),ce.rect(t+1,c-40,10,39))}0==o.length&&(ce.noStroke(),ce.fill("#00e676"),ce.rect(a,c-80,r-10,12,20,0,0,20),ce.triangle(r-10,c-80+12,r-10,c-80,r,c-80+6),ce.fill("#fff"),ce.stroke("#fff"),ce.textSize(11),ce.text("source",a+80,c-80+10));for(let e=0;e<o.length;e++){let t=o[e],n=c-80-20*e;ce.noStroke(),"right"===(void 0===t.direction?"right":"left")?(ce.fill("#4479FF"),ce.rect(a,n,r-10,12,20,0,0,20),ce.triangle(r-10,n+12,r-10,n,r,n+6)):(ce.fill("#89ACFF"),ce.rect(a+15,n,r,12,0,20,20,0),ce.triangle(a+15,n,a+15,n+12,a,n+6)),ce.fill("#fff"),ce.stroke("#fff"),ce.textSize(11),ce.text(t.label,a+80,n+10)}return ce.pop(),d}render_units(){let e=fe.getSequence();ye=this.getMaxAminosPerLine(e);for(let t=0;t<10;t++){if(150*t+(de/4-de/4/10)+150>de)break;let n=t*ye;Ce=t;let l=fe.getFeatureDataFromPosition(xe+n);this.renderUnit(0,150*t,e,xe+n,l,t)}}hitboxCheck(){let e=ue-ue/10,t=de/4;fe.getSequence();let n=-1;for(let l=0;l<10;l++){if(150*l+(de/4-de/4/10)+150>de)break;let o=ce.mouseX,i=ce.mouseY;o>0&&o<e+15&&i>150*l+2*t/3.5&&(n=l)}return n}mouse_to_sequence(e){let t=ce.mouseX;ce.mouseY;for(let e=0;e<ye;e++){let n=0+10*e+5;if(t>n-5&&t<n+5)return e}}drawCursor(e,t,n,l){if(null==e||null==t)return;let o=xe+ye*e+t;if(null!=n&&o!=n+ye*e+t)return;if(o<0||o<xe)return;let i=de/4,r=150*e+(i-i/10),s=10*t+5;ce.push(),ce.fill(l),ce.stroke(l),ce.rect(s-6,r,1,-45),ce.triangle(s-9,r-45,s-2,r-45,s-5,r-40),ce.fill(255),ce.stroke(220),ce.rect(s-25,r+2,40,20,20),ce.fill(0),ce.textSize(9),ce.textAlign(ce.CENTER),ce.noStroke(),ce.text(o.toString(),s-5,r+15),ce.pop()}draw(){this.render_units(),this.drawCursor(_e.unit,_e.pos,null,"#000")}}let Se,Ue="ACAAA",Ge=0,Me=0,Ee=0,Le=!1,ze={p1:{x:0,y:0},p2:{x:0,y:0}},Te=[],He=[],je=[],Ie=[],Fe="";class Ne{constructor(e,t,n){ge=this,ve=e,me=t/2,we=n/2,Ue=fe.getSequence(),Ge=me/2,Me=we/2,be=we-we/2,ke=fe.getName(),this.calculateArrows()}static destroy(){console.log("destroy called"),ve=null,ge=null}static updateSequence(e){Ue=e}static activateSelection(){Le=!Le,Ee=0,ze={p1:{x:0,y:0},p2:{x:0,y:0}},$e.clearMarkers(),ve.loop()}static clearSelection(){Le=!1,Ee=0,ze={p1:{x:0,y:0},p2:{x:0,y:0}},ve.loop()}static loop(){try{Ue=fe.getSequence(),Te=[],He=[],je=[],Ie=[],ge.calculateArrows(),ve.loop()}catch(e){}}static resize(e,t){me=e,we=t,Ge=me/2,Me=we/2,be=we-we/2}handleSelection(){if(0==Ee&&(ze.p1.x=ve.mouseX,ze.p1.y=ve.mouseY),1==Ee){ze.p2.x=ve.mouseX,ze.p2.y=ve.mouseY;let e=this.angle_to_base(this.point_to_angle(ze.p1.x,ze.p1.y)),t=this.angle_to_base(this.point_to_angle(ze.p2.x,ze.p2.y));$e.updateMarkers(e,t)}Ee<=2&&Ee++}featureClicked(e){for(let e=0;e<Te.length;e++){let t,n=Te[e],l=n.level,o=40+50*l;t=0==l?70+70*l:70+70*l-20*l;let i=ve.dist(Ge,Me,ve.mouseX,ve.mouseY)<(be-o)/2,r=ve.dist(Ge,Me,ve.mouseX,ve.mouseY)>(be-t)/2;if(i&&r){let e=this.point_to_angle(ve.mouseX,ve.mouseY)<this.base_to_angle(n.end);if(this.point_to_angle(ve.mouseX,ve.mouseY)>this.base_to_angle(n.start)&&e)return n.label}}return""}mouseClicked(e){Le?this.handleSelection():(Fe=this.featureClicked(),0!==Fe.length&&$e.goToFeature(Fe))}rad_to_ang(e){return 180*e/Math.PI}base_to_angle(e){return Math.floor(ve.map(e,0,Ue.length,0,360,!0))}angle_to_base(e){return Math.floor(ve.map(e,0,360,0,Ue.length,!0))}point_to_angle(e,t){let n=this.rad_to_ang(Math.atan2(t-Me,e-Ge))+90;return n<0?n+360:n}draw_arrow(e,t,n,l,o,i){let r,s,a,c,u=this.base_to_angle(e),d=this.base_to_angle(t);if(d-u<5)return;switch(i){case 0:a="#8B64BA",c="#D7C7EB";break;case 1:a="#DBB083",c="#F8DEC1";break;case 2:a="#59BACC",c="#AAE4EF";break;case 3:a="#589BE8",c="#83b9ff";break;case 4:a="#DBDB36",c="#ffffb3"}Fe!=l&&(a=c);let h,f=40+50*o;h=0==o?70+70*o:70+70*o-20*o,"right"==n?(r=u-90,s=d-95):(r=u-90,s=d-90);let p=-be/2;ve.push(),ve.translate(Ge,Me),ve.stroke(255,255,255,0),ve.fill(c),ve.strokeWeight(2);let g=40,v=70+70*o-(9-4*o);"right"==n?(ve.rotate(Math.floor(d)),ve.triangle(0,Math.round(p+g/3)+Math.round(v/3)-5,2*o-12,p+v/3,-12,p+v/3+16+2*o),ve.stroke(a),ve.line(0,Math.round(p+g/3)+Math.round(v/3)-5,2*o-10,p+v/3),ve.line(0,Math.round(p+g/3)+Math.round(v/3)-5,-10,p+v/3+16+2*o)):(ve.rotate(u),ve.triangle(0,Math.round(p+g/3)+Math.round(v/3)+2,-10,p+v/3+7,0,Math.round(p+g/3)+Math.round(v/3)-13,-10,p+v/3+7,0,0),ve.stroke(a),ve.line(0,Math.round(p+g/3)+Math.round(v/3)+2,-10,p+v/3+7),ve.line(0,Math.round(p+g/3)+Math.round(v/3)-13,-10,p+v/3+7)),ve.pop(),ve.push(),ve.translate(Ge,Me),ve.rotate(r),ve.fill(c),ve.stroke(a),ve.strokeWeight(2),ve.arc(0,0,be-f,be-f,0,s-r),ve.fill(255),ve.arc(0,0,be-h,be-h,0,s-r),ve.pop(),ve.push(),ve.stroke(a),ve.strokeWeight(2),ve.translate(Ge,Me),"left"==n?ve.rotate(Math.floor(d)):ve.rotate(Math.floor(u)),ve.line(0,Math.round(p+g/3)+Math.round(v/3)+1,0,p+v/3),ve.pop(),ve.push(),ve.translate(Ge,Me),ve.rotate((d-u)/2+u),ve.textSize(9),(Math.abs(d)+Math.abs(u))/9/l.length>3&&ve.text(l,-l.length/4*9,Math.round(p+g/3)+Math.round(v/3)-3),ve.pop()}draw_scale_rects(){for(let e=0;e<Ue.length;e+=Math.floor(Ue.length/4)){if(ve.push(),ve.translate(Ge,Me),ve.angleMode(ve.DEGREES),ve.rotate(this.base_to_angle(e)),ve.noStroke(),0==e?(ve.fill(50),ve.rect(0,-Me/2,3,10)):(ve.fill(121),ve.rect(0,-Me/2,2,6)),0==e){ve.pop();continue}ve.fill(77),ve.textFont("Verdana"),ve.textSize(12);let t=Math.round(e).toString();ve.text(t,-12*t.length+3,-Me/2+4,30,100),ve.pop()}}drawSelectionLine(e,t,n){ve.push(),ve.stroke(n),ve.strokeWeight(3),ve.fill(n),ve.translate(e.x,e.y),ve.line(0,0,t.x,t.y),ve.rotate(t.heading());ve.translate(t.mag()+7+3,0),ve.triangle(0,3.5,0,-3.5,-8,0),ve.pop()}drawFilledArc(e,t){ve.push(),ve.translate(Ge,Me),ve.rotate(e),ve.fill(255,229,199,100),ve.stroke(210,110,99),ve.strokeWeight(3),ve.arc(0,0,be,be,0,t-e),ve.pop()}draw_selection(){if(0==Le)return;let e=ve.createVector(Ge,Me),t=0!=ze.p1.x&&0!=ze.p1.y,n=0!=ze.p2.x&&0!=ze.p2.y;if(!n){ve.push();let t=ve.createVector(ve.mouseX-Ge,ve.mouseY-Me).normalize().mult(Me/2);this.drawSelectionLine(e,t,"#eaeaea"),ve.pop()}if(t&&!n){ve.push();let t=ve.createVector(ve.mouseX-Ge,ve.mouseY-Me).normalize().mult(Me/2);this.drawSelectionLine(e,t,"#eaeaea");let n=ve.createVector(ze.p1.x-Ge,ze.p1.y-Me).normalize().mult(Me/2);this.drawSelectionLine(e,n,"#000"),ve.pop(),this.drawFilledArc(n.heading(),t.heading())}if(n){let t=ve.createVector(ze.p1.x-Ge,ze.p1.y-Me).normalize().mult(Me/2);this.drawSelectionLine(e,t,"#000");let n=ve.createVector(ze.p2.x-Ge,ze.p2.y-Me).normalize().mult(Me/2);this.drawSelectionLine(e,n,"#000"),this.drawFilledArc(t.heading(),n.heading())}}draw_circle(){ve.push(),Le?ve.stroke("#000"):ve.stroke(121),ve.strokeWeight(3),ve.circle(Ge,Me,be),ve.pop()}draw_plasmid_name(){ve.push(),ve.translate(Ge,Me),ve.noStroke(),ve.fill("white"),ve.circle(0,0,Me/3),ve.fill("#131313"),ve.textFont("Verdana"),ve.textStyle(ve.BOLD),ve.textSize(12),ve.textAlign(ve.CENTER),ve.text(ke,-ke.length/2*12,-7,12*ke.length,14);let e=(Ue.length.toString()+" bp").length;ve.textStyle(ve.NORMAL),ve.fill("#838383"),ve.text(Ue.length.toString()+" bp",-e/2*12,12,12*e,14),ve.pop()}canFitInLevel(e,t,n){let l=[];switch(n){case 0:l=He.slice();break;case 1:l=je.slice();break;case 2:l=Ie.slice();break;default:console.warn("Level you tried to get does not exist!")}if(0==l.length)return!0;let o=!0;for(let n=0;n<l.length;l++)this.collides(l[n].start,l[n].end,e,t)&&(o=!1);return o}collides(e,t,n,l){return n>=e&&n<=t||l>=e&&l<=t}calculateArrows(){Te=[],fe.getFeatures().forEach((e=>{if(null==e.label||""==e.label)return;let t={start:e.start,end:e.end,label:e.label,level:0,color:0};null!=e.direction&&null!=e.direction?t.direction=e.direction.toLowerCase():t.direction="right";e:for(let n=0;n<3;n++)if(this.canFitInLevel(e.start,e.end,n))switch(t.level=n,t.color=n,n){case 0:He.push({start:e.start,end:e.end});break e;case 1:je.push({start:e.start,end:e.end});break e;case 2:Ie.push({start:e.start,end:e.end});break e;default:console.warn("Level index out of range!")}Te.push(t)}))}drawAllArrows(){for(let e=0;e<Te.length;e++){let t=Te[e];0==t.level&&this.draw_arrow(t.start,t.end,t.direction,t.label,t.level,e%5)}for(let e=0;e<Te.length;e++){let t=Te[e];1==t.level&&this.draw_arrow(t.start,t.end,t.direction,t.label,t.level,e%5)}for(let e=0;e<Te.length;e++){let t=Te[e];2==t.level&&this.draw_arrow(t.start,t.end,t.direction,t.label,t.level,e%5)}}draw(){this.draw_circle(),this.draw_scale_rects(),this.drawAllArrows(),this.draw_selection(),this.draw_plasmid_name();let e=0!=ze.p1.x&&0!=ze.p1.y,t=0!=ze.p2.x&&0!=ze.p2.y;e&&t?ve.noLoop():1==Le?ve.loop():ve.noLoop()}}re.subscribe((e=>{})),se.subscribe((e=>{Se=e}));let De={},Pe={};class qe{constructor(){let e=this.constructor.getSettings().project_paths[0];this.constructor.openProject(e.path),new fe({})}static getSettings(){let e=ae("settings"),t=this.b64_to_utf8(e);return De=JSON.parse(t),De}static getProject(e){let t=ae("proj?location="+e),n=this.b64_to_utf8(t);return JSON.parse(n)}static addPlasmid(e){let t={name:"Unamed Plasmid",type:"plasmid",data:JSON.parse(this.b64_to_utf8(e))};Pe.inventory.push(t),this.updateStore()}static openProject(e){Pe=this.getProject(e),re.set("EDITOR");let t=Se;t.current_project=Pe,se.set(t)}static getCurrentProject(){return Pe}static updateStore(){let e=Se;e.current_project=Pe,se.set(e)}static addItemToInventory(e){Pe.inventory.push(e),this.updateStore()}static deleteItemFromInventory(e){Pe.inventory.splice(e,1),this.updateStore()}static changeItemName(e,t){let n=Se;Pe.inventory[e].name=t;for(let l=0;l<n.left_panel.tabs.length;l++)n.left_panel.tabs[l].uuid==e&&(n.left_panel.tabs[l].name=t);this.updateStore()}static createNewTab(e){let t=Pe.inventory[e],n={name:t.name,type:t.type,uuid:e},l=Se;"left"==l.activePanel&&(l.left_panel.current_tab=l.left_panel.tabs.length,l.activeTab=l.left_panel.tabs.length,l.left_panel.tabs.push(n)),"right"==l.activePanel&&(l.right_panel.current_tab=l.right_panel.tabs.length,l.activeTab=l.right_panel.tabs.length,l.right_panel.tabs.push(n)),se.set(l)}static setActiveTab(e,t){let n=Se;n.activeTab=e,n.activePanel=t,"left"==n.activePanel&&(n.left_panel.current_tab=e),"right"==n.activePanel&&(n.right_panel.current_tab=e),se.set(n)}static closeTab(e,t){let n=Se;"right"==t?(n.right_panel.tabs.splice(e,1),n.right_panel.current_tab>=0&&(n.right_panel.current_tab=e-1)):"left"==t&&(n.left_panel.tabs.splice(e,1),n.left_panel.current_tab>=0&&(n.left_panel.current_tab=e-1)),se.set(n)}static savePlasmidOnStore(){let e=fe.getCurrentState();if(0!=Object.keys(e).length){let t=Se;t.current_project.inventory[t.left_panel.tabs[t.left_panel.current_tab].uuid].data=e,se.set(t)}}static loadNewPlasmid(e){fe.loadNewData(e.data),Ne.loop()}static b64_to_utf8(e){return decodeURIComponent(escape(window.atob(e)))}}function Oe(t){let n,l,o,i,r,s,a,c,u,d=t[1].charAt(0)+"";return{c(){n=w("div"),l=w("h1"),o=b(d),i=k(),r=w("h1"),s=b(t[1]),C(l,"class","project-letter svelte-1a7fw1k"),C(r,"class","project-title svelte-1a7fw1k"),C(n,"class",a=h(Ve(t[0]))+" svelte-1a7fw1k")},m(e,a){g(e,n,a),p(n,l),p(l,o),p(n,i),p(n,r),p(r,s),c||(u=x(n,"click",t[4]),c=!0)},p(e,[t]){2&t&&d!==(d=e[1].charAt(0)+"")&&y(o,d),2&t&&y(s,e[1]),1&t&&a!==(a=h(Ve(e[0]))+" svelte-1a7fw1k")&&C(n,"class",a)},i:e,o:e,d(e){e&&v(n),c=!1,u()}}}function Ve(e){switch(e%5){case 0:return"project purple";case 1:return"project lightblue";case 2:return"project pink";case 3:return"project orange";case 4:return"project teal"}}function Be(e,t,n){let{key:l=0}=t,{name:o=""}=t,{path:i=""}=t;function r(){!function(e,t){let n={name:t,project_path:e,split_window:!1,show_filepicker:!0,show_menu:!1,show_optimizer:!1,screen_on_top_showing:!1,show_replace:!1,show_goto:!1,show_insert:!1,show_new_feature:!1,current_project:{},activeTab:0,activePanel:"left",left_panel:{current_tab:0,tabs:[]},right_panel:{current_tab:0,tabs:[]}};se.set(n)}(i,o),qe.openProject(i)}se.subscribe((e=>{}));return e.$$set=e=>{"key"in e&&n(0,l=e.key),"name"in e&&n(1,o=e.name),"path"in e&&n(3,i=e.path)},[l,o,r,i,()=>r()]}class Re extends le{constructor(e){super(),ne(this,e,Be,Oe,i,{key:0,name:1,path:3})}}function Ke(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function We(t){let n,l;return n=new Re({props:{key:t[15],name:t[13].name,path:t[13].path}}),{c(){J(n.$$.fragment)},m(e,t){Z(n,e,t),l=!0},p:e,i(e){l||(Y(n.$$.fragment,e),l=!0)},o(e){Q(n.$$.fragment,e),l=!1},d(e){ee(n,e)}}}function Ye(e){let t,n,o,i,r,s,a,c,u,d,f,m,y,A,$,S,U,G;return{c(){t=w("div"),n=w("div"),o=w("h1"),o.textContent="New project",i=k(),r=w("input"),s=k(),a=w("input"),c=k(),u=w("button"),d=b("Pick location"),m=k(),y=w("div"),A=w("button"),A.textContent="Cancel",$=k(),S=w("button"),S.textContent="Save",C(o,"class","svelte-14aav3q"),C(r,"placeholder","Project name..."),C(r,"class","svelte-14aav3q"),C(a,"placeholder","Authors..."),C(a,"class","svelte-14aav3q"),C(u,"class",f=h(""!=e[3]?"location":"")+" svelte-14aav3q"),C(A,"class","cancelbtn svelte-14aav3q"),C(S,"class","savebtn svelte-14aav3q"),C(y,"class","buttons svelte-14aav3q"),C(n,"class","container svelte-14aav3q"),C(t,"class","save svelte-14aav3q")},m(l,h){g(l,t,h),p(t,n),p(n,o),p(n,i),p(n,r),_(r,e[1]),p(n,s),p(n,a),_(a,e[2]),p(n,c),p(n,u),p(u,d),p(n,m),p(n,y),p(y,A),p(y,$),p(y,S),U||(G=[x(r,"input",e[10]),x(a,"input",e[11]),x(u,"click",e[7]),x(A,"click",e[6]),x(S,"click",e[8])],U=!0)},p(e,t){2&t&&r.value!==e[1]&&_(r,e[1]),4&t&&a.value!==e[2]&&_(a,e[2]),8&t&&f!==(f=h(""!=e[3]?"location":"")+" svelte-14aav3q")&&C(u,"class",f)},d(e){e&&v(t),U=!1,l(G)}}}function Qe(e){let t,n,l,o,i,s,a,c,u,d,h,f,b,y,_,A,$,S,U,G,M,E,L,z,T,H=e[4].project_paths,j=[];for(let t=0;t<H.length;t+=1)j[t]=We(Ke(e,H,t));const I=e=>Q(j[e],1,1,(()=>{j[e]=null}));let F=e[0]&&Ye(e);return{c(){t=w("main"),n=w("div"),l=w("div"),o=w("img"),s=k(),a=w("div"),a.innerHTML='<div class="sidebar-icons-icon svelte-14aav3q"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokelinecap="round" strokelinejoin="round" strokewidth="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div> \n\n\t\t\t<div class="sidebar-icons-icon svelte-14aav3q"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokelinecap="round" strokelinejoin="round" strokewidth="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div> \n\t\t\t<div class="sidebar-icons-icon svelte-14aav3q"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokelinecap="round" strokelinejoin="round" strokewidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path strokelinecap="round" strokelinejoin="round" strokewidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div>',c=k(),u=w("div"),d=w("div"),d.innerHTML='<div class="search-icon svelte-14aav3q"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> \n\n\n\t\t\t<input class="search-input svelte-14aav3q" placeholder="Type in to search..." type="text"/>',h=k(),f=w("div"),b=w("div"),y=k(),_=w("h1"),_.textContent="Projects",A=k(),$=w("h1"),$.textContent=`${e[5]}`,S=k(),U=w("div"),G=w("div"),G.innerHTML='<h1 class="project-letter svelte-14aav3q">+</h1> \n\t\t\t\t<h1 class="project-title svelte-14aav3q">New Project</h1>',M=k();for(let e=0;e<j.length;e+=1)j[e].c();var p,g;E=k(),F&&F.c(),p=o.src,g=i=Xe,r||(r=document.createElement("a")),r.href=g,p!==r.href&&C(o,"src",i),C(o,"alt","monochrome logo"),C(o,"class","svelte-14aav3q"),C(l,"class","sidebar-logo svelte-14aav3q"),C(a,"class","sidebar-icons"),C(n,"class","sidebar svelte-14aav3q"),C(d,"class","search svelte-14aav3q"),C(b,"class","projects-info-circle svelte-14aav3q"),C(_,"class","projects-info-title svelte-14aav3q"),C($,"class","projects-info-number svelte-14aav3q"),C(f,"class","projects-info svelte-14aav3q"),C(G,"class","project project-new svelte-14aav3q"),C(U,"class","projects-list svelte-14aav3q"),C(u,"class","projects svelte-14aav3q"),C(t,"class","svelte-14aav3q")},m(i,r){g(i,t,r),p(t,n),p(n,l),p(l,o),p(n,s),p(n,a),p(t,c),p(t,u),p(u,d),p(u,h),p(u,f),p(f,b),p(f,y),p(f,_),p(f,A),p(f,$),p(u,S),p(u,U),p(U,G),p(U,M);for(let e=0;e<j.length;e+=1)j[e].m(U,null);p(t,E),F&&F.m(t,null),L=!0,z||(T=x(G,"click",e[9]),z=!0)},p(e,[n]){if(16&n){let t;for(H=e[4].project_paths,t=0;t<H.length;t+=1){const l=Ke(e,H,t);j[t]?(j[t].p(l,n),Y(j[t],1)):(j[t]=We(l),j[t].c(),Y(j[t],1),j[t].m(U,null))}for(K(),t=H.length;t<j.length;t+=1)I(t);W()}e[0]?F?F.p(e,n):(F=Ye(e),F.c(),F.m(t,null)):F&&(F.d(1),F=null)},i(e){if(!L){for(let e=0;e<H.length;e+=1)Y(j[e]);L=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)Q(j[e]);L=!1},d(e){e&&v(t),m(j,e),F&&F.d(),z=!1,T()}}}let Xe="./gh_icon_monochrome.png";function Je(e,t,n){let l=qe.getSettings(),o=l.project_paths.length;se.subscribe((e=>{}));let i=!1,r="",s="",a="";function c(){n(0,i=!1),n(1,r=""),n(2,s=""),n(3,a="")}return[i,r,s,a,l,o,c,function(){console.log("Picking location");let e=ae("loc");n(3,a=e+".gh")},function(){let e=qe.getSettings();e.project_paths.push({name:r,path:a}),ae("update?settings="+window.btoa(unescape(encodeURIComponent(JSON.stringify(e)))));let t={name:r,authors:s,inventory:[]};ae("saveAs?data="+window.btoa(unescape(encodeURIComponent(a+"|"+JSON.stringify(t))))),qe.openProject(a),c()},()=>n(0,i=!0),function(){r=this.value,n(1,r)},function(){s=this.value,n(2,s)}]}class Ze extends le{constructor(e){super(),ne(this,e,Je,Qe,i,{})}}function et(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-rldfnf" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4" class="svelte-rldfnf"></path></svg>',C(t,"class","tab-icon svelte-rldfnf")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function tt(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-rldfnf" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" class="svelte-rldfnf"></path></svg>',C(t,"class","tab-icon svelte-rldfnf")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function nt(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-rldfnf" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-rldfnf"></path></svg>',C(t,"class","tab-icon svelte-rldfnf")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function lt(t){let n,o,i,r,s,a,c,u,d,f,m,_="plasmid"==t[0]&&et(),A="text-editor"==t[0]&&tt(),$="empty"==t[0]&&nt();return{c(){n=w("div"),_&&_.c(),o=k(),A&&A.c(),i=k(),$&&$.c(),r=k(),s=w("h1"),a=b(t[1]),c=k(),u=w("div"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-rldfnf" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-rldfnf"></path></svg>',C(s,"class","tab-text svelte-rldfnf"),C(u,"class","tab-close-icon svelte-rldfnf"),C(n,"key",t[3]),C(n,"class",d=h(t[2]?"tab tab-active":"tab tab-inactive")+" svelte-rldfnf")},m(e,l){g(e,n,l),_&&_.m(n,null),p(n,o),A&&A.m(n,null),p(n,i),$&&$.m(n,null),p(n,r),p(n,s),p(s,a),p(n,c),p(n,u),f||(m=[x(u,"click",t[4]),x(n,"click",t[5])],f=!0)},p(e,[t]){"plasmid"==e[0]?_||(_=et(),_.c(),_.m(n,o)):_&&(_.d(1),_=null),"text-editor"==e[0]?A||(A=tt(),A.c(),A.m(n,i)):A&&(A.d(1),A=null),"empty"==e[0]?$||($=nt(),$.c(),$.m(n,r)):$&&($.d(1),$=null),2&t&&y(a,e[1]),8&t&&C(n,"key",e[3]),4&t&&d!==(d=h(e[2]?"tab tab-active":"tab tab-inactive")+" svelte-rldfnf")&&C(n,"class",d)},i:e,o:e,d(e){e&&v(n),_&&_.d(),A&&A.d(),$&&$.d(),f=!1,l(m)}}}function ot(e,t,n){let{icon_type:l=""}=t,{text:o=""}=t,{active:i=!1}=t,{id:r=null}=t,{panel:s=null}=t,{key:a=null}=t;return e.$$set=e=>{"icon_type"in e&&n(0,l=e.icon_type),"text"in e&&n(1,o=e.text),"active"in e&&n(2,i=e.active),"id"in e&&n(6,r=e.id),"panel"in e&&n(7,s=e.panel),"key"in e&&n(3,a=e.key)},[l,o,i,a,function(){null!=r&&qe.closeTab(r,s)},function(){null!=r&&qe.setActiveTab(r,s)},r,s]}class it extends le{constructor(e){super(),ne(this,e,ot,lt,i,{icon_type:0,text:1,active:2,id:6,panel:7,key:3})}}let rt=[{name:"GFP",desc:"This protein glows in the dark",sequence:"MSKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMKQHDFFKSAMPEGYVQERTIFFKDDGNYKTRAEVKFEGDTLVNRIELKGIDFKEDGNILGHKLEYNYNSHNVYIMADKQKNGIKVNFKIRHNIEDGSVQLADHYQQNTPIGDGPVLLPDNHYLSTQSALSKDPNEKRDHMVLLEFVTAAGITHGMDELYK"},{name:"Ovalbumin",desc:"Egg white",sequence:"MGSIGAASMEFCFDVFKELKVHHANENIFYCPIAIMSALAMVYLGAKDSTRTQINKVVRFDKLPGFGDSIEAQCGTSVNVHSSLRDILNQITKPNDVYSFSLASRLYAEERYPILPEYLQCVKELYRGGLEPINFQTAADQARELINSWVESQTNGIIRNVLQPSSVDSQTAMVLVNAIVFKGLWEKAFKDEDTQAMPFRVTEQESKPVQMMYQIGLFRVASMASEKMKILELPFASGTMSMLVLLPDEVSGLEQLESIINFEKLTEWTSSNVMEERKIKVYLPRMKMEEKYNLTSVLMAMGITDVFSSSANLSGISSAESLKISQAVHAAHAEINEAGREVVGSAEAGVDAASVSEEFRADHPFLFCIKHIATNAVLFFGRCVSP"}];class st{static getProteins(){return rt}static lookUp(e){if(""==e.replace(/ /g,""))return rt;if(""==e)return rt;let t=[];for(let n=0;n<rt.length;n++){let l=rt[n].name.toLowerCase().includes(e.toLowerCase()),o=rt[n].desc.toLowerCase().includes(e.toLowerCase());(l||o)&&t.push(rt[n])}return t}}function at(e,t,n){const l=e.slice();return l[14]=t[n].name,l[15]=t[n].desc,l[16]=t[n].sequence,l}function ct(t){let n,o,i,r,s,a,c,u;return{c(){n=w("div"),o=w("h1"),o.textContent="Insert",i=k(),r=w("div"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-el0w2x" fill="none" viewBox="0 0 24 24" stroke="#4479FF"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg> \n\t\t\t<h2 class="svelte-el0w2x">Sequence</h2>',s=k(),a=w("div"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-el0w2x" fill="none" viewBox="0 0 24 24" stroke="#4479FF"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"></path></svg> \n\t\t\t<h2 class="svelte-el0w2x">Protein</h2>',C(o,"class","svelte-el0w2x"),C(r,"class","c-option svelte-el0w2x"),C(a,"class","c-option svelte-el0w2x"),C(n,"class","container svelte-el0w2x")},m(e,l){g(e,n,l),p(n,o),p(n,i),p(n,r),p(n,s),p(n,a),c||(u=[x(r,"click",t[4]),x(a,"click",t[5])],c=!0)},p:e,d(e){e&&v(n),c=!1,l(u)}}}function ut(e){let t,n,o,i,r,s,a,c,u,d,h;return{c(){t=w("div"),n=w("h1"),n.textContent="Insert sequence",o=k(),i=w("input"),r=k(),s=w("div"),a=w("button"),a.textContent="Cancel",c=k(),u=w("button"),u.textContent="Insert",C(n,"class","svelte-el0w2x"),C(i,"type","text"),C(i,"placeholder","Type any codon or sequence here..."),C(i,"class","svelte-el0w2x"),C(a,"class","cancel svelte-el0w2x"),C(u,"class","ok svelte-el0w2x"),C(s,"class","buttons svelte-el0w2x"),C(t,"class","container svelte-el0w2x")},m(l,f){g(l,t,f),p(t,n),p(t,o),p(t,i),_(i,e[1]),p(t,r),p(t,s),p(s,a),p(s,c),p(s,u),d||(h=[x(i,"input",e[9]),x(a,"click",e[6]),x(u,"click",e[7])],d=!0)},p(e,t){2&t&&i.value!==e[1]&&_(i,e[1])},d(e){e&&v(t),d=!1,l(h)}}}function dt(e){let t,n,o,i,r,s,a,c,u,d,h,f=e[3],b=[];for(let t=0;t<f.length;t+=1)b[t]=ht(at(e,f,t));return{c(){t=w("div"),n=w("h1"),n.textContent="Insert protein",o=k(),i=w("input"),r=k(),s=w("div");for(let e=0;e<b.length;e+=1)b[e].c();a=k(),c=w("div"),u=w("button"),u.textContent="Cancel",C(n,"class","svelte-el0w2x"),C(i,"type","text"),C(i,"placeholder","What are you looking for?"),C(i,"class","svelte-el0w2x"),C(s,"class","protein-container svelte-el0w2x"),C(u,"class","cancel svelte-el0w2x"),C(c,"class","buttons svelte-el0w2x"),C(t,"class","container bigcontainer  svelte-el0w2x")},m(l,f){g(l,t,f),p(t,n),p(t,o),p(t,i),_(i,e[2]),p(t,r),p(t,s);for(let e=0;e<b.length;e+=1)b[e].m(s,null);p(t,a),p(t,c),p(c,u),d||(h=[x(i,"input",e[10]),x(i,"input",e[11]),x(u,"click",e[6])],d=!0)},p(e,t){if(4&t&&i.value!==e[2]&&_(i,e[2]),264&t){let n;for(f=e[3],n=0;n<f.length;n+=1){const l=at(e,f,n);b[n]?b[n].p(l,t):(b[n]=ht(l),b[n].c(),b[n].m(s,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=f.length}},d(e){e&&v(t),m(b,e),d=!1,l(h)}}}function ht(e){let t,n,l,o,i,r,s,a,c,u=e[14]+"",d=e[15]+"";function h(){return e[12](e[16])}return{c(){t=w("div"),n=w("h2"),l=b(u),o=k(),i=w("h3"),r=b(d),s=k(),C(n,"class","svelte-el0w2x"),C(i,"class","svelte-el0w2x"),C(t,"class","protein svelte-el0w2x")},m(e,u){g(e,t,u),p(t,n),p(n,l),p(t,o),p(t,i),p(i,r),p(t,s),a||(c=x(t,"click",h),a=!0)},p(t,n){e=t,8&n&&u!==(u=e[14]+"")&&y(l,u),8&n&&d!==(d=e[15]+"")&&y(r,d)},d(e){e&&v(t),a=!1,c()}}}function ft(t){let n,l,o,i="menu"==t[0]&&ct(t),r="sequence"==t[0]&&ut(t),s="protein"==t[0]&&dt(t);return{c(){n=w("main"),i&&i.c(),l=k(),r&&r.c(),o=k(),s&&s.c(),C(n,"class","svelte-el0w2x")},m(e,t){g(e,n,t),i&&i.m(n,null),p(n,l),r&&r.m(n,null),p(n,o),s&&s.m(n,null)},p(e,[t]){"menu"==e[0]?i?i.p(e,t):(i=ct(e),i.c(),i.m(n,l)):i&&(i.d(1),i=null),"sequence"==e[0]?r?r.p(e,t):(r=ut(e),r.c(),r.m(n,o)):r&&(r.d(1),r=null),"protein"==e[0]?s?s.p(e,t):(s=dt(e),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:e,o:e,d(e){e&&v(n),i&&i.d(),r&&r.d(),s&&s.d()}}}function pt(e){switch(e){case"A":return"GCU";case"I":return"AUU";case"R":return"CGU";case"L":return"CUU";case"N":return"AAU";case"K":return"AAA";case"D":return"GAU";case"M":return"AUG";case"F":return"UUU";case"C":return"UGU";case"P":return"CCU";case"Q":return"CAA";case"S":return"UCU";case"E":return"GAA";case"T":return"ACU";case"W":return"UGG";case"G":return"GGU";case"Y":return"UAU";case"H":return"CAU";case"V":return"GUU";case"X":return"UAA";default:return""}}function gt(e,t,n){let l;se.subscribe((e=>{l=e}));let o="menu";let i="";function r(){n(0,o="menu");let e=l;e.show_insert=!1,e.screen_on_top_showing=!1,se.set(e),n(1,i="")}function s(){let[e,t]=$e.getSelected();if(null==e)return;let n=fe.getSequence(),l="";for(let e=0;e<i.length;e++){let t=i[e];l+="a"==t||"t"==t||"g"==t||"c"==t?t:pt(t.toUpperCase()).toLowerCase().replace(/u/g,"t")}let o=n.substring(0,e)+l+n.substring(e);fe.updateSequence(o);let s=fe.getFeatures();for(let t=0;t<s.length;t++)e>s[t].start&&e<s[t].end&&(s[t].end+=l.length),e<s[t].start&&(s[t].start+=l.length,s[t].end+=l.length);$e.updateMarkers(e,e+l.length),$e.loop(),Ne.loop(),r()}let a="",c=st.lookUp(a);function u(e){n(1,i=e),s()}return[o,i,a,c,function(){n(0,o="sequence")},function(){n(0,o="protein")},r,s,u,function(){i=this.value,n(1,i)},()=>n(3,c=st.lookUp(a)),function(){a=this.value,n(2,a)},e=>u(e)]}class vt extends le{constructor(e){super(),ne(this,e,gt,ft,i,{})}}function mt(e){var t={exports:{}};return e(t,t.exports),t.exports}var wt=mt((function(e){(e.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var l=t(e[n]);if(l)return l}}})),bt=mt((function(e){var t=e.exports={};t.isIE=function(e){return(-1!==(t=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/"))&&(!e||e===function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:undefined}());var t},t.isLegacyOpera=function(){return!!window.opera}})),kt=mt((function(e){(e.exports={}).getOption=function(e,t,n){var l=e[t];if(null==l&&void 0!==n)return n;return l}})),xt=function(e){var t=(e=e||{}).reporter,n=kt.getOption(e,"async",!0),l=kt.getOption(e,"auto",!0);l&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var o,i=Ct(),r=!1;function s(){for(r=!0;i.size();){var e=i;i=Ct(),e.process()}r=!1}function a(){var e;e=s,o=setTimeout(e,0)}return{add:function(e,t){!r&&l&&n&&0===i.size()&&a(),i.add(e,t)},force:function(e){r||(void 0===e&&(e=n),o&&(clearTimeout(o),o=null),e?a():s())}}};function Ct(){var e={},t=0,n=0,l=0;return{add:function(o,i){i||(i=o,o=0),o>n?n=o:o<l&&(l=o),e[o]||(e[o]=[]),e[o].push(i),t++},process:function(){for(var t=l;t<=n;t++)for(var o=e[t],i=0;i<o.length;i++){(0,o[i])()}},size:function(){return t}}}function yt(e){return e._erd}var _t={initState:function(e){return e._erd={},yt(e)},getState:yt,cleanState:function(e){delete e._erd}},At=wt.forEach,$t=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,l=e.stateHandler.getState;e.stateHandler.hasState;var o=e.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var i=function(){var e=500,t=500,n=document.createElement("div");n.style.cssText=a(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var l=document.createElement("div");l.style.cssText=a(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),l.appendChild(n),document.body.insertBefore(l,document.body.firstChild);var o=e-l.clientWidth,i=t-l.clientHeight;return document.body.removeChild(l),{width:o,height:i}}(),r="erd_scroll_detection_container";function s(e){!function(e,t,n){function l(n,l){l=l||function(t){e.head.appendChild(t)};var o=e.createElement("style");return o.innerHTML=n,o.id=t,l(o),o}if(!e.getElementById(t)){var o=n+"_animation",i=n+"_animation_active",r="/* Created by the element-resize-detector library. */\n";r+="."+n+" > div::-webkit-scrollbar { "+a(["display: none"])+" }\n\n",r+="."+i+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+o,"animation-name: "+o])+" }\n",r+="@-webkit-keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",l(r+="@keyframes "+o+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(e,"erd_scroll_detection_scrollbar_style",r)}function a(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function c(e,n,l){if(e.addEventListener)e.addEventListener(n,l);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,l)}}function u(e,n,l){if(e.removeEventListener)e.removeEventListener(n,l);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,l)}}function d(e){return l(e).container.childNodes[0].childNodes[0].childNodes[0]}function h(e){return l(e).container.childNodes[0].childNodes[0].childNodes[1]}return s(window.document),{makeDetectable:function(e,s,u){function f(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(s),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var l=0;l<n.length;l++)t.log(n[l])}}function p(e){var t=l(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function g(){var e=window.getComputedStyle(s),t={};return t.position=e.position,t.width=s.offsetWidth,t.height=s.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function v(){if(f("storeStyle invoked."),l(s)){var e=g();l(s).style=e}else f("Aborting because element has been uninstalled")}function m(e,t,n){l(e).lastWidth=t,l(e).lastHeight=n}function w(){return 2*i.width+1}function b(){return 2*i.height+1}function k(e){return e+10+w()}function x(e){return e+10+b()}function C(e,t,n){var l=d(e),o=h(e),i=k(t),r=x(n),s=function(e){return 2*e+w()}(t),a=function(e){return 2*e+b()}(n);l.scrollLeft=i,l.scrollTop=r,o.scrollLeft=s,o.scrollTop=a}function y(){var e=l(s).container;if(!e){(e=document.createElement("div")).className=r,e.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),l(s).container=e,function(e){e.className+=" "+r+"_animation_active"}(e),s.appendChild(e);var t=function(){l(s).onRendered&&l(s).onRendered()};c(e,"animationstart",t),l(s).onAnimationStart=t}return e}function _(){if(f("Injecting elements"),l(s)){!function(){var n=l(s).style;if("static"===n.position){s.style.setProperty("position","relative",e.important?"important":"");var o=function(e,t,n,l){var o=n[l];"auto"!==o&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(o)&&(e.warn("An element that is positioned static has style."+l+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+l+" will be set to 0. Element: ",t),t.style[l]=0)};o(t,s,n,"top"),o(t,s,n,"right"),o(t,s,n,"bottom"),o(t,s,n,"left")}}();var n=l(s).container;n||(n=y());var o,u,d,h,p=i.width,g=i.height,v=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),m=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(o=(o=-(1+p))?o+"px":"0"),"top: "+(u=(u=-(1+g))?u+"px":"0"),"right: "+(h=(h=-p)?h+"px":"0"),"bottom: "+(d=(d=-g)?d+"px":"0")])),w=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),b=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),k=a(["position: absolute","left: 0","top: 0"]),x=a(["position: absolute","width: 200%","height: 200%"]),C=document.createElement("div"),_=document.createElement("div"),A=document.createElement("div"),$=document.createElement("div"),S=document.createElement("div"),U=document.createElement("div");C.dir="ltr",C.style.cssText=v,C.className=r,_.className=r,_.style.cssText=m,A.style.cssText=w,$.style.cssText=k,S.style.cssText=b,U.style.cssText=x,A.appendChild($),S.appendChild(U),_.appendChild(A),_.appendChild(S),C.appendChild(_),n.appendChild(C),c(A,"scroll",G),c(S,"scroll",M),l(s).onExpandScroll=G,l(s).onShrinkScroll=M}else f("Aborting because element has been uninstalled");function G(){l(s).onExpand&&l(s).onExpand()}function M(){l(s).onShrink&&l(s).onShrink()}}function A(){function i(t,n,l){var o=function(e){return d(e).childNodes[0]}(t),i=k(n),r=x(l);o.style.setProperty("width",i+"px",e.important?"important":""),o.style.setProperty("height",r+"px",e.important?"important":"")}function r(r){var c=s.offsetWidth,u=s.offsetHeight,d=c!==l(s).lastWidth||u!==l(s).lastHeight;f("Storing current size",c,u),m(s,c,u),n.add(0,(function(){if(d)if(l(s))if(a()){if(e.debug){var n=s.offsetWidth,r=s.offsetHeight;n===c&&r===u||t.warn(o.get(s),"Scroll: Size changed before updating detector elements.")}i(s,c,u)}else f("Aborting because element container has not been initialized");else f("Aborting because element has been uninstalled")})),n.add(1,(function(){l(s)?a()?C(s,c,u):f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")})),d&&r&&n.add(2,(function(){l(s)?a()?r():f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")}))}function a(){return!!l(s).container}function c(){f("notifyListenersIfNeeded invoked");var e=l(s);return void 0===l(s).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?f("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?f("Not notifying: Size already notified"):(f("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void At(l(s).listeners,(function(e){e(s)})))}function u(){f("Scroll detected."),p(s)?f("Scroll event fired while unrendered. Ignoring..."):r(c)}if(f("registerListenersAndPositionElements invoked."),l(s)){l(s).onRendered=function(){if(f("startanimation triggered."),p(s))f("Ignoring since element is still unrendered...");else{f("Element rendered.");var e=d(s),t=h(s);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(f("Scrollbars out of sync. Updating detector elements..."),r(c))}},l(s).onExpand=u,l(s).onShrink=u;var g=l(s).style;i(s,g.width,g.height)}else f("Aborting because element has been uninstalled")}function $(){if(f("finalizeDomMutation invoked."),l(s)){var e=l(s).style;m(s,e.width,e.height),C(s,e.width,e.height)}else f("Aborting because element has been uninstalled")}function S(){u(s)}function U(){var e;f("Installing..."),l(s).listeners=[],e=g(),l(s).startSize={width:e.width,height:e.height},f("Element start size",l(s).startSize),n.add(0,v),n.add(1,_),n.add(2,A),n.add(3,$),n.add(4,S)}u||(u=s,s=e,e=null),e=e||{},f("Making detectable..."),!function(e){return!function(e){var t=e.getRootNode&&e.getRootNode().contains(e);return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)||t}(e)||null===window.getComputedStyle(e)}(s)?U():(f("Element is detached"),y(),f("Waiting until element is attached..."),l(s).onRendered=function(){f("Element is now attached"),U()})},addListener:function(e,t){if(!l(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");l(e).listeners.push(t)},uninstall:function(e){var t=l(e);t&&(t.onExpandScroll&&u(d(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&u(h(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&u(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:s}},St=wt.forEach;function Ut(e){return Array.isArray(e)||void 0!==e.length}function Gt(e){if(Array.isArray(e))return e;var t=[];return St(e,(function(e){t.push(e)})),t}function Mt(e){return e&&1===e.nodeType}function Et(e,t,n){var l=e[t];return null==l&&void 0!==n?n:l}var Lt=function(e){var t,n;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var l=function(e){var t=e.idGenerator,n=e.stateHandler.getState;return{get:function(e){var t=n(e);return t&&void 0!==t.id?t.id:null},set:function(e){var l=n(e);if(!l)throw new Error("setId required the element to have a resize detection state.");var o=t.generate();return l.id=o,o}}}({idGenerator:(n=1,{generate:function(){return n++}}),stateHandler:_t});t=l}var o=e.reporter;o||(o=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var l=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};l(n,"log"),l(n,"warn"),l(n,"error")}return n}(!1===o));var i=Et(e,"batchProcessor",xt({reporter:o})),r={};r.callOnAdd=!!Et(e,"callOnAdd",!0),r.debug=!!Et(e,"debug",!1);var s,a=function(e){var t={};function n(n){var l=e.get(n);return void 0===l?[]:t[l]||[]}return{get:n,add:function(n,l){var o=e.get(n);t[o]||(t[o]=[]),t[o].push(l)},removeListener:function(e,t){for(var l=n(e),o=0,i=l.length;o<i;++o)if(l[o]===t){l.splice(o,1);break}},removeAllListeners:function(e){var t=n(e);t&&(t.length=0)}}}(t),c=function(e){var t=e.stateHandler.getState;return{isDetectable:function(e){var n=t(e);return n&&!!n.isDetectable},markAsDetectable:function(e){t(e).isDetectable=!0},isBusy:function(e){return!!t(e).busy},markBusy:function(e,n){t(e).busy=!!n}}}({stateHandler:_t}),u=Et(e,"strategy","object"),d=Et(e,"important",!1),h={reporter:o,batchProcessor:i,stateHandler:_t,idHandler:t,important:d};if("scroll"===u&&(bt.isLegacyOpera()?(o.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),u="object"):bt.isIE(9)&&(o.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),u="object")),"scroll"===u)s=$t(h);else{if("object"!==u)throw new Error("Invalid strategy name: "+u);s=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,l=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function o(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function i(e){return l(e).object}return{makeDetectable:function(e,i,r){r||(r=i,i=e,e=null),(e=e||{}).debug,bt.isIE(8)?r(i):function(i,r){var s=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),a=!1,c=window.getComputedStyle(i),u=i.offsetWidth,d=i.offsetHeight;function h(){function n(){if("static"===c.position){i.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,l,o){var i=l[o];"auto"!==i&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(i)&&(t.warn("An element that is positioned static has style."+o+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+o+" will be set to 0. Element: ",n),n.style.setProperty(o,"0",e.important?"important":""))};n(t,i,c,"top"),n(t,i,c,"right"),n(t,i,c,"bottom"),n(t,i,c,"left")}}""!==c.position&&(n(),a=!0);var o=document.createElement("object");o.style.cssText=s,o.tabIndex=-1,o.type="text/html",o.setAttribute("aria-hidden","true"),o.onload=function(){a||n(),function e(t,n){if(!t.contentDocument){var o=l(t);return o.checkForObjectDocumentTimeoutId&&window.clearTimeout(o.checkForObjectDocumentTimeoutId),void(o.checkForObjectDocumentTimeoutId=setTimeout((function(){o.checkForObjectDocumentTimeoutId=0,e(t,n)}),100))}n(t.contentDocument)}(this,(function(e){r(i)}))},bt.isIE()||(o.data="about:blank"),l(i)&&(i.appendChild(o),l(i).object=o,bt.isIE()&&(o.data="about:blank"))}l(i).startSize={width:u,height:d},n?n.add(h):h()}(i,r)},addListener:function(e,t){function n(){t(e)}if(bt.isIE(8))l(e).object={proxy:n},e.attachEvent("onresize",n);else{var o=i(e);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(e){if(l(e)){var t=i(e);t&&(bt.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),l(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(l(e).checkForObjectDocumentTimeoutId),delete l(e).object)}}}}(h)}var f={};return{listenTo:function(e,n,l){function i(e){var t=a.get(e);St(t,(function(t){t(e)}))}function u(e,t,n){a.add(t,n),e&&n(t)}if(l||(l=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!l)throw new Error("Listener required.");if(Mt(n))n=[n];else{if(!Ut(n))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=Gt(n)}var h=0,p=Et(e,"callOnAdd",r.callOnAdd),g=Et(e,"onReady",(function(){})),v=Et(e,"debug",r.debug);St(n,(function(e){_t.getState(e)||(_t.initState(e),t.set(e));var r=t.get(e);if(v&&o.log("Attaching listener to element",r,e),!c.isDetectable(e))return v&&o.log(r,"Not detectable."),c.isBusy(e)?(v&&o.log(r,"System busy making it detectable"),u(p,e,l),f[r]=f[r]||[],void f[r].push((function(){++h===n.length&&g()}))):(v&&o.log(r,"Making detectable..."),c.markBusy(e,!0),s.makeDetectable({debug:v,important:d},e,(function(e){if(v&&o.log(r,"onElementDetectable"),_t.getState(e)){c.markAsDetectable(e),c.markBusy(e,!1),s.addListener(e,i),u(p,e,l);var t=_t.getState(e);if(t&&t.startSize){var a=e.offsetWidth,d=e.offsetHeight;t.startSize.width===a&&t.startSize.height===d||i(e)}f[r]&&St(f[r],(function(e){e()}))}else v&&o.log(r,"Element uninstalled before being detectable.");delete f[r],++h===n.length&&g()})));v&&o.log(r,"Already detecable, adding listener."),u(p,e,l),h++})),h===n.length&&g()},removeListener:a.removeListener,removeAllListeners:a.removeAllListeners,uninstall:function(e){if(!e)return o.error("At least one element is required.");if(Mt(e))e=[e];else{if(!Ut(e))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=Gt(e)}St(e,(function(e){a.removeAllListeners(e),s.uninstall(e),_t.cleanState(e)}))},initDocument:function(e){s.initDocument&&s.initDocument(e)}}}({strategy:"scroll"});function zt(e,t){Lt.listenTo(e,t);var n=t;return{update:function(t){Lt.removeListener(e,n),Lt.listenTo(e,t),n=t},destroy:function(){Lt.removeListener(e,n)}}}function Tt(e){let t,n,l,o,i,r,s,a,c,u,d;return{c(){t=w("div"),n=w("h1"),n.textContent="Optimized! ",l=k(),o=w("h3"),i=b("We've replaced "),r=b(e[0]),s=b(" codons!"),a=k(),c=w("button"),c.textContent="Close",C(n,"class","svelte-1mgh7vg"),C(o,"class","svelte-1mgh7vg"),C(c,"class","svelte-1mgh7vg"),C(t,"class","container svelte-1mgh7vg")},m(h,f){g(h,t,f),p(t,n),p(t,l),p(t,o),p(o,i),p(o,r),p(o,s),p(t,a),p(t,c),u||(d=x(c,"click",e[3]),u=!0)},p(e,t){1&t&&y(r,e[0])},d(e){e&&v(t),u=!1,d()}}}function Ht(e){let t,n,o,i,r,s,a,c,u,d,f,m,y,_,A,$,S,U,G,M,E;return{c(){t=w("div"),n=w("h1"),n.textContent="Optimize for",o=k(),i=w("h2"),r=b("Escherichia coli"),a=k(),c=w("h2"),u=b("Saccharomyces cerevisiae"),f=k(),m=w("h2"),y=b("Human"),A=k(),$=w("div"),S=w("button"),S.textContent="Cancel",U=k(),G=w("button"),G.textContent="Optimize",C(n,"class","svelte-1mgh7vg"),C(i,"class",s=h(1==e[2]?"selected":"")+" svelte-1mgh7vg"),C(c,"class",d=h(2==e[2]?"selected":"")+" svelte-1mgh7vg"),C(m,"class",_=h(3==e[2]?"selected":"")+" svelte-1mgh7vg"),C(S,"class","svelte-1mgh7vg"),C(G,"class","opti svelte-1mgh7vg"),C($,"class","buttons svelte-1mgh7vg"),C(t,"class","container svelte-1mgh7vg")},m(l,s){g(l,t,s),p(t,n),p(t,o),p(t,i),p(i,r),p(t,a),p(t,c),p(c,u),p(t,f),p(t,m),p(m,y),p(t,A),p(t,$),p($,S),p($,U),p($,G),M||(E=[x(i,"click",e[6]),x(c,"click",e[7]),x(m,"click",e[8]),x(S,"click",e[3]),x(G,"click",e[4])],M=!0)},p(e,t){4&t&&s!==(s=h(1==e[2]?"selected":"")+" svelte-1mgh7vg")&&C(i,"class",s),4&t&&d!==(d=h(2==e[2]?"selected":"")+" svelte-1mgh7vg")&&C(c,"class",d),4&t&&_!==(_=h(3==e[2]?"selected":"")+" svelte-1mgh7vg")&&C(m,"class",_)},d(e){e&&v(t),M=!1,l(E)}}}function jt(t){let n;function l(e,t){return 0==e[1]?Ht:1==e[1]?Tt:void 0}let o=l(t),i=o&&o(t);return{c(){n=w("main"),i&&i.c(),C(n,"class","svelte-1mgh7vg")},m(e,t){g(e,n,t),i&&i.m(n,null)},p(e,[t]){o===(o=l(e))&&i?i.p(e,t):(i&&i.d(1),i=o&&o(e),i&&(i.c(),i.m(n,null)))},i:e,o:e,d(e){e&&v(n),i&&i.d()}}}function It(e){let t=e.toUpperCase().replace(/T/g,"U");return"GCU, GCC, GCA, GCG ".includes(t)?"A":"AUU, AUC, AUA".includes(t)?"I":"CGU, CGC, CGA, CGG; AGA, AGG".includes(t)?"R":"CUU, CUC, CUA, CUG; UUA, UUG".includes(t)?"L":"AAU, AAC".includes(t)?"N":"AAA, AAG".includes(t)?"K":"GAU, GAC".includes(t)?"D":"AUG".includes(t)?"M":"UUU, UUC".includes(t)?"F":"UGU, UGC".includes(t)?"C":"CCU, CCC, CCA, CCG".includes(t)?"P":"CAA, CAG".includes(t)?"Q":"UCU, UCC, UCA, UCG; AGU, AGC".includes(t)?"S":"GAA, GAG".includes(t)?"E":"ACU, ACC, ACA, ACG".includes(t)?"T":"UGG".includes(t)?"W":"GGU, GGC, GGA, GGG".includes(t)?"G":"UAU, UAC".includes(t)?"Y":"CAU, CAC".includes(t)?"H":"GUU, GUC, GUA, GUG".includes(t)?"V":"UAA, UGA, UAG".includes(t)?"X":"0"}function Ft(e,t){for(let n=0;n<t.length;n++)if(t[n].codon==e)return!0;return!1}function Nt(e,t,n){let l,o=[],i=0;function r(e,t,l){for(let o=0;o<l.length;o++)if(l[o].codon==e&&t!=l[o].amino)return n(0,i++,i),l[o].amino.toLowerCase().replace(/u/g,"t");return t}se.subscribe((e=>{l=e}));let s=!1,a=0;function c(e){n(2,a=e)}E((()=>{o=function(e){let t=e.replace(/\n/g,"").split("|"),n=[];for(let e=0;e<t.length;e++){let l=t[e],o="";for(let e=3;e<l.length&&"("!=l[e];e++)o+=l[e];let i=l.slice(0,3),r=It(i),s=parseFloat(o);if(Ft(r,n)){for(let e=0;e<n.length;e++)if(n[e].codon==r){n[e].hz<s&&(n[e].hz=s,n[e].amino=i);break}}else n.push({codon:r,amino:i,hz:s})}return n}("\nUUU 25.9(118900)  |UCU 23.6(108308)  |UAU 18.7( 85651)  |UGU  8.0( 36624)\nUUC 18.3( 83880)  |UCC 14.3( 65421)  |UAC 14.7( 67599)  |UGC  4.6( 21255)\nUUA 26.3(120698)  |UCA 18.7( 85618)  |UAA  1.0(  4476)  |UGA  0.6(  2742)\nUUG 27.2(124967)  |UCG  8.5( 39137)  |UAG  0.4(  2058)  |UGG 10.4( 47694)\n\n|CUU 12.1( 55578)  |CCU 13.6( 62239)  |CAU 13.7( 62778)  |CGU  6.5( 29889)\n|CUC  5.3( 24356)  |CCC  6.8( 31159)  |CAC  7.9( 36091)  |CGC  2.6( 11745)\n|CUA 13.4( 61295)  |CCA 18.3( 84043)  |CAA 27.6(126408)  |CGA  3.0( 13696)\n|CUG 10.4( 47502)  |CCG  5.3( 24197)  |CAG 12.1( 55674)  |CGG  1.7(  7817)\n\n|AUU 30.2(138594)  |ACU 20.3( 93201)  |AAU 35.8(163988)  |AGU 14.1( 64654)\n|AUC 17.2( 78930)  |ACC 12.6( 57989)  |AAC 25.0(114583)  |AGC  9.6( 43963)\n|AUA 17.6( 80793)  |ACA 17.8( 81436)  |AAA 41.9(192152)  |AGA 21.3( 97775)\n|AUG 20.9( 95777)  |ACG  8.0( 36487)  |AAG 30.8(141373)  |AGG  9.2( 42079)\n\n|GUU 22.1(101373)  |GCU 21.3( 97801)  |GAU 37.8(173483) |GGU 24.2(111169)\n|GUC 11.7( 53607)  |GCC 12.7( 58177)  |GAC 20.4( 93454) |GGC  9.7( 44449)\n|GUA 11.7( 53529)  |GCA 16.2( 74272)  |GAA 45.9(210641) |GGA 10.8( 49693)\n|GUG 10.6( 48745)  |GCG  6.1( 28165)  |GAG 19.0( 87277) |GGG  5.9( 27160)\n")})),L((()=>{n(0,i=0),n(1,s=!1),n(2,a=0)}));return[i,s,a,function(){let e=l;e.show_optimizer=!1,e.screen_on_top_showing=!1,se.set(e)},function(){let e=fe.getSequence(),t=fe.getFeatures();n(1,s=!0),t.forEach((t=>{if("CDS"==t.Kind){console.log("ORINGINAL SEQ: ",e.length);let n=function(e,t){let n=e;for(let l=0;l<e.length;l+=3){let o=e[l]+e[l+1]+e[l+2],i=r(It(o),o,t);o!=i&&(n=n.substring(0,l)+i+n.substring(l+3))}return n}(e.substring(t.start,t.end),o);e=e.substring(0,t.start)+n+e.substring(t.end),console.log("NEW SEQ: ",e.length)}})),fe.updateSequence(e)},c,()=>c(1),()=>c(2),()=>c(3)]}class Dt extends le{constructor(e){super(),ne(this,e,Nt,jt,i,{})}}function Pt(t){let n,o,i,r,s,a,c,u,d,h,f,m,b,y,_,A,$;return{c(){n=w("div"),o=w("div"),i=w("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>',r=k(),s=w("div"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"></path></svg>',a=k(),c=w("div"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',u=k(),d=w("div"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',h=k(),f=w("div"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>',m=k(),b=w("div"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',y=k(),_=w("div"),C(i,"class","icon svelte-10zlhc4"),C(s,"class","icon svelte-10zlhc4"),C(c,"class","icon svelte-10zlhc4"),C(d,"class","icon svelte-10zlhc4"),C(f,"class","icon svelte-10zlhc4"),C(b,"class","icon svelte-10zlhc4"),C(o,"class","tooltip svelte-10zlhc4"),C(_,"id","sequencemap"),C(_,"class","second-canvas canvtracker svelte-10zlhc4"),C(n,"class","right-side svelte-10zlhc4")},m(e,l){g(e,n,l),p(n,o),p(o,i),p(o,r),p(o,s),p(o,a),p(o,c),p(o,u),p(o,d),p(o,h),p(o,f),p(o,m),p(o,b),p(n,y),p(n,_),A||($=[x(i,"click",t[14]),x(s,"click",t[15]),x(c,"click",t[16]),x(d,"click",t[17]),x(f,"click",t[18]),x(b,"click",t[21])],A=!0)},p:e,d(e){e&&v(n),A=!1,l($)}}}function qt(e){let t,n,o,i,r,s,a,c,u,d,h,f;return{c(){t=w("div"),n=w("div"),o=w("h1"),o.textContent="Replace",i=k(),r=w("input"),s=k(),a=w("div"),c=w("button"),c.textContent="Cancel",u=k(),d=w("button"),d.textContent="Done",C(o,"class","svelte-10zlhc4"),C(r,"type","text"),C(r,"placeholder","Type any codon or sequence here..."),C(r,"class","svelte-10zlhc4"),C(c,"class","cancel svelte-10zlhc4"),C(d,"class","ok svelte-10zlhc4"),C(a,"class","buttons"),C(n,"class","replace svelte-10zlhc4"),C(t,"class","whitebg svelte-10zlhc4")},m(l,v){g(l,t,v),p(t,n),p(n,o),p(n,i),p(n,r),_(r,e[8]),p(n,s),p(n,a),p(a,c),p(a,u),p(a,d),h||(f=[x(r,"input",e[30]),x(c,"click",e[24]),x(d,"click",e[25])],h=!0)},p(e,t){256&t[0]&&r.value!==e[8]&&_(r,e[8])},d(e){e&&v(t),h=!1,l(f)}}}function Ot(e){let t,n,o,i,r,s,a,c,u,d,h,f;return{c(){t=w("div"),n=w("div"),o=w("h1"),o.textContent="Name feature",i=k(),r=w("input"),s=k(),a=w("div"),c=w("button"),c.textContent="Cancel",u=k(),d=w("button"),d.textContent="Done",C(o,"class","svelte-10zlhc4"),C(r,"type","text"),C(r,"placeholder","Type a name..."),C(r,"class","svelte-10zlhc4"),C(c,"class","cancel svelte-10zlhc4"),C(d,"class","ok svelte-10zlhc4"),C(a,"class","buttons"),C(n,"class","replace svelte-10zlhc4"),C(t,"class","whitebg svelte-10zlhc4")},m(l,v){g(l,t,v),p(t,n),p(n,o),p(n,i),p(n,r),_(r,e[6]),p(n,s),p(n,a),p(a,c),p(a,u),p(a,d),h||(f=[x(r,"input",e[31]),x(c,"click",e[19]),x(d,"click",e[20])],h=!0)},p(e,t){64&t[0]&&r.value!==e[6]&&_(r,e[6])},d(e){e&&v(t),h=!1,l(f)}}}function Vt(e){let t,n,o,i,r,s,a,c,u,d,h,f;return{c(){t=w("div"),n=w("div"),o=w("h1"),o.textContent="Go to",i=k(),r=w("input"),s=k(),a=w("div"),c=w("button"),c.textContent="Cancel",u=k(),d=w("button"),d.textContent="Go",C(o,"class","svelte-10zlhc4"),C(r,"type","text"),C(r,"placeholder","Where do you want to go?"),C(r,"class","svelte-10zlhc4"),C(c,"class","cancel svelte-10zlhc4"),C(d,"class","ok svelte-10zlhc4"),C(n,"class","replace svelte-10zlhc4"),C(t,"class","whitebg svelte-10zlhc4")},m(l,v){g(l,t,v),p(t,n),p(n,o),p(n,i),p(n,r),_(r,e[7]),p(n,s),p(n,a),p(a,c),p(a,u),p(a,d),h||(f=[x(r,"input",e[32]),x(c,"click",e[22]),x(d,"click",e[23])],h=!0)},p(e,t){128&t[0]&&r.value!==e[7]&&_(r,e[7])},d(e){e&&v(t),h=!1,l(f)}}}function Bt(e){let t,n;return t=new vt({}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Rt(e){let t,n;return t=new Dt({}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Kt(t){let n,i,r,s,a,c,u,d,h,f,m,b,y,A,S,U;D(t[28]);let G=0==t[0].split_window&&Pt(t),M=1==t[0].show_replace&&qt(t),E=1==t[0].show_new_feature&&Ot(t),L=1==t[0].show_goto&&Vt(t),z=1==t[0].show_insert&&Bt(),T=1==t[0].show_optimizer&&Rt();return{c(){n=w("main"),i=w("div"),s=k(),G&&G.c(),a=k(),M&&M.c(),c=k(),E&&E.c(),u=k(),L&&L.c(),d=k(),z&&z.c(),h=k(),f=w("textarea"),m=k(),T&&T.c(),b=k(),y=w("button"),y.textContent="Optimize",C(i,"id","circularmap"),C(i,"class","main-canvas canvtracker svelte-10zlhc4"),D((()=>t[29].call(i))),C(f,"class","copyarea svelte-10zlhc4"),C(y,"class","optibutton svelte-10zlhc4"),C(n,"class","svelte-10zlhc4")},m(l,k){var C;g(l,n,k),p(n,i),r=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=w("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const l=$();let o;return l?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=x(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{o=x(n.contentWindow,"resize",t)}),p(e,n),()=>{(l||o&&n.contentWindow)&&o(),v(n)}}(i,t[29].bind(i)),p(n,s),G&&G.m(n,null),p(n,a),M&&M.m(n,null),p(n,c),E&&E.m(n,null),p(n,u),L&&L.m(n,null),p(n,d),z&&z.m(n,null),p(n,h),p(n,f),_(f,t[3]),t[34](f),p(n,m),T&&T.m(n,null),p(n,b),p(n,y),t[35](n),A=!0,S||(U=[x(window,"resize",t[28]),(C=zt.call(null,i,t[13]),C&&o(C.destroy)?C.destroy:e),x(f,"input",t[33]),x(y,"click",t[26])],S=!0)},p(e,t){0==e[0].split_window?G?G.p(e,t):(G=Pt(e),G.c(),G.m(n,a)):G&&(G.d(1),G=null),1==e[0].show_replace?M?M.p(e,t):(M=qt(e),M.c(),M.m(n,c)):M&&(M.d(1),M=null),1==e[0].show_new_feature?E?E.p(e,t):(E=Ot(e),E.c(),E.m(n,u)):E&&(E.d(1),E=null),1==e[0].show_goto?L?L.p(e,t):(L=Vt(e),L.c(),L.m(n,d)):L&&(L.d(1),L=null),1==e[0].show_insert?z?1&t[0]&&Y(z,1):(z=Bt(),z.c(),Y(z,1),z.m(n,h)):z&&(K(),Q(z,1,1,(()=>{z=null})),W()),8&t[0]&&_(f,e[3]),1==e[0].show_optimizer?T?1&t[0]&&Y(T,1):(T=Rt(),T.c(),Y(T,1),T.m(n,b)):T&&(K(),Q(T,1,1,(()=>{T=null})),W())},i(e){A||(Y(z),Y(T),A=!0)},o(e){Q(z),Q(T),A=!1},d(e){e&&v(n),r(),G&&G.d(),M&&M.d(),E&&E.d(),L&&L.d(),z&&z.d(),t[34](null),T&&T.d(),t[35](null),S=!1,l(U)}}}function Wt(e,t){return e>t?e:t}function Yt(e){switch(e){case"A":return"GCU";case"I":return"AUU";case"R":return"CGU";case"L":return"CUU";case"N":return"AAU";case"K":return"AAA";case"D":return"GAU";case"M":return"AUG";case"F":return"UUU";case"C":return"UGU";case"P":return"CCU";case"Q":return"CAA";case"S":return"UCU";case"E":return"GAA";case"T":return"ACU";case"W":return"UGG";case"G":return"GGU";case"Y":return"UAU";case"H":return"CAU";case"V":return"GUU";case"X":return"UAA";default:return""}}function Qt(e,t,n){let l,o,i,r,s,a,c,u,d,h,f,{src:p={}}=t,g={};function v(e){try{Ne.resize(a,c),$e.resize(a,c),Ne.loop(),$e.loop()}catch(e){}}se.subscribe((e=>{n(0,s=e)})),document.onkeypress=function(e){let t=void 0!==e?e.keyCode:e.which;if(h=String.fromCharCode(t),!s.split_window&&!s.screen_on_top_showing)switch(h){case"s":Ne.activateSelection();break;case"m":if($e.addMarker(),2==$e.getNumberOfMarkers()){let[e,t]=$e.getSelected();if(null===e||null===t)return;let l=fe.getSequence().substring(e,t);n(3,u=l)}break;case"r":{let e=s;e.show_replace=!0,e.screen_on_top_showing=!0,se.set(e)}break;case"g":A()}};let m,w,b=e=>{f=new Ne(e,Wt(a,c),Wt(a,c)),e.setup=()=>{let t=Wt(a,c);e.createCanvas(t,t)},e.draw=()=>{let t=Wt(a,c);e.resizeCanvas(t,t),e.background(255),f.draw()},e.mousePressed=t=>{try{f.mouseClicked(t),e.loop()}catch(t){}}},k=e=>{m=new $e(e,Wt(a,c),Wt(a,c)),e.setup=()=>{let t=Wt(a,c);e.createCanvas(t,t)},e.draw=()=>{let t=Wt(a,c);e.resizeCanvas(t,t),e.background(255),m.draw(),e.noLoop()},e.mousePressed=t=>{try{m.mouseClicked(t),e.loop()}catch(t){}},e.mouseWheel=e=>{try{let t=e.delta<0?"up":"down";m.scroll(t)}catch(e){}}};function x(){let[e,t]=$e.getSelected();if(null===e||null===t)return;let n=fe.getSequence(),l=n.substring(0,e)+n.substring(t);fe.updateSequence(l);let o=t-e,i=fe.getFeatures(),r=[];for(let n=0;n<i.length;n++)if(!(e<i[n].start&&t>i[n].end))if(e>i[n].start&&t<i[n].end){let e=i[n];e.end=i[n].end-o,r.push(e)}else if(e<i[n].end){let e=i[n];e.start=i[n].start-o,e.end=i[n].end-o,r.push(e)}else r.push(i[n]);fe.updateFeatures(r),$e.loop(),Ne.loop()}E((function(){new p5(b,"circularmap"),!1===s.split_window&&new p5(k,"sequencemap")})),L((function(){document.querySelectorAll(".canvtracker").forEach((e=>e.remove())),Ne.destroy(),$e.destroy(),f=null,m=null}));let C="";function y(){let e=s;e.show_new_feature=!1,e.screen_on_top_showing=!1,se.set(e)}let _="";function A(){let e=s;s.screen_on_top_showing||(e.show_goto=!0,e.screen_on_top_showing=!0,se.set(e),n(7,_=""))}function $(){let e=s;e.show_goto=!1,e.screen_on_top_showing=!1,se.set(e),n(7,_="")}let S="";function U(){let e=s;e.show_replace=!1,e.screen_on_top_showing=!1,se.set(e),n(8,S="")}return e.$$set=e=>{"src"in e&&n(27,p=e.src)},e.$$.update=()=>{134217728&e.$$.dirty[0]&&function(){if(JSON.stringify(g)!==JSON.stringify(p)){g=Object.assign({},p);let e=Object.assign({},p);qe.loadNewPlasmid(e)}}(),1&e.$$.dirty[0]&&v()},n(12,l=0),n(11,o=0),n(10,i=0),n(9,r=0),[s,a,c,u,d,w,C,_,S,r,i,o,l,v,function(){d.select(),document.execCommand("copy")},function(){d.select(),document.execCommand("copy"),x()},x,function(){let e=s;e.show_insert=!0,e.screen_on_top_showing=!0,se.set(e)},function(){let e=s;e.show_new_feature=!0,e.screen_on_top_showing=!0,se.set(e)},y,function(){let[e,t]=$e.getSelected();null!==e&&null!==t&&(fe.addFeature(e,t,C),$e.loop(),Ne.loop(),y())},A,$,function(){""!=_&&/^-?\d+$/.test(_)?($e.goto(parseInt(_),!0),$e.loop(),$()):$()},U,function(){let[e,t]=$e.getSelected();if(""===S||null===e||null===t)return;let n="";for(let e=0;e<S.length;e++){let t=S[e];n+="a"==t||"t"==t||"g"==t||"c"==t?t:Yt(t.toUpperCase()).toLowerCase().replace(/u/g,"t")}if(n.length!=t-e)return U(),void console.log("Out of bounds replace error. e-s was: ",t-e," but len was: ",n,"final_sequence");let l=fe.getSequence(),o=l.substring(0,e)+n+l.substring(t);fe.updateSequence(o),$e.loop(),U()},function(){let e=s;e.show_optimizer=!0,e.screen_on_top_showing=!0,se.set(e)},p,function(){n(11,o=window.innerWidth),n(12,l=window.outerWidth),n(9,r=window.innerHeight),n(10,i=window.outerHeight)},function(){a=this.clientWidth,c=this.clientHeight,n(1,a),n(2,c)},function(){S=this.value,n(8,S)},function(){C=this.value,n(6,C)},function(){_=this.value,n(7,_)},function(){u=this.value,n(3,u)},function(e){H[e?"unshift":"push"]((()=>{d=e,n(4,d)}))},function(e){H[e?"unshift":"push"]((()=>{w=e,n(5,w)}))}]}class Xt extends le{constructor(e){super(),ne(this,e,Qt,Kt,i,{src:27},null,[-1,-1])}}const{window:Jt}=X;function Zt(e,t,n){const l=e.slice();return l[28]=t[n],l[30]=n,l}function en(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 \t\t0 \t\t118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 \t\t0-1.457.39-2.823 1.07-4" class="svelte-1hgbg84"></path></svg>',C(t,"class","icon file-icon svelte-1hgbg84")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function tn(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="#767C89"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" class="svelte-1hgbg84"></path></svg>',C(t,"class","icon file-icon svelte-1hgbg84")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function nn(e){let t,n,o,i,r,s,a=e[28].name+"";function c(){return e[24](e[30])}function u(){return e[25](e[30])}return{c(){t=w("h2"),n=b(a),o=k(),i=w("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" class="svelte-1hgbg84"></path></svg>',C(t,"class","svelte-1hgbg84"),C(i,"class","icon ham svelte-1hgbg84")},m(e,l){g(e,t,l),p(t,n),g(e,o,l),g(e,i,l),r||(s=[x(t,"click",c),x(i,"click",u)],r=!0)},p(t,l){e=t,4&l&&a!==(a=e[28].name+"")&&y(n,a)},d(e){e&&v(t),e&&v(o),e&&v(i),r=!1,l(s)}}}function ln(e){let t,n,o,i,r;return{c(){t=w("input"),n=k(),o=w("button"),o.textContent="Done",C(t,"type","text"),C(t,"class","svelte-1hgbg84"),C(o,"class","svelte-1hgbg84")},m(l,s){g(l,t,s),_(t,e[6]),g(l,n,s),g(l,o,s),i||(r=[x(t,"input",e[23]),x(o,"click",e[15])],i=!0)},p(e,n){64&n&&t.value!==e[6]&&_(t,e[6])},d(e){e&&v(t),e&&v(n),e&&v(o),i=!1,l(r)}}}function on(e){let t,n,l,o,i="plasmid"==e[28].type&&en(),r="text-editor"==e[28].type&&tn();function s(e,t){return e[5]&&e[30]==e[3]?ln:nn}let a=s(e),c=a(e);return{c(){t=w("div"),i&&i.c(),n=k(),r&&r.c(),l=k(),c.c(),o=k(),C(t,"class","file svelte-1hgbg84")},m(e,s){g(e,t,s),i&&i.m(t,null),p(t,n),r&&r.m(t,null),p(t,l),c.m(t,null),p(t,o)},p(e,u){"plasmid"==e[28].type?i||(i=en(),i.c(),i.m(t,n)):i&&(i.d(1),i=null),"text-editor"==e[28].type?r||(r=tn(),r.c(),r.m(t,l)):r&&(r.d(1),r=null),a===(a=s(e))&&c?c.p(e,u):(c.d(1),c=a(e),c&&(c.c(),c.m(t,o)))},d(e){e&&v(t),i&&i.d(),r&&r.d(),c.d()}}}function rn(e){let t,n,o,i,r,s,a,c;return{c(){t=w("div"),n=w("h1"),n.textContent="Rename",o=k(),i=w("h1"),i.textContent="Clone",r=k(),s=w("h1"),s.textContent="Delete",C(n,"class","svelte-1hgbg84"),C(i,"class","svelte-1hgbg84"),C(s,"class","svelte-1hgbg84"),C(t,"class","submenu svelte-1hgbg84"),A(t,"left",e[0]+250+"px"),A(t,"top",e[1]+40+40*e[3]+"px")},m(l,u){g(l,t,u),p(t,n),p(t,o),p(t,i),p(t,r),p(t,s),a||(c=[x(n,"click",e[14]),x(i,"click",e[13]),x(s,"click",e[16])],a=!0)},p(e,n){1&n&&A(t,"left",e[0]+250+"px"),10&n&&A(t,"top",e[1]+40+40*e[3]+"px")},d(e){e&&v(t),a=!1,l(c)}}}function sn(t){let n,o,i,r,s,a,c,u,d,h,f,b,y,_,$,S,U,G=t[2].current_project.inventory,M=[];for(let e=0;e<G.length;e+=1)M[e]=on(Zt(t,G,e));let E=t[4]&&rn(t);return{c(){n=w("main"),o=w("div"),i=w("div"),r=w("h1"),r.textContent="Inventory",s=k(),a=w("input"),c=k(),u=w("div"),d=w("div"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" class="svelte-1hgbg84"></path></svg>',h=k(),f=w("div"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" class="svelte-1hgbg84"></path></svg>',b=k(),y=w("div"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 svelte-1hgbg84" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1hgbg84"></path></svg>',_=k();for(let e=0;e<M.length;e+=1)M[e].c();$=k(),E&&E.c(),C(r,"class","svelte-1hgbg84"),A(a,"display","none"),C(a,"type","file"),C(a,"accept",".gbk"),C(a,"class","svelte-1hgbg84"),C(d,"class","icon tool-icon svelte-1hgbg84"),C(f,"class","icon tool-icon svelte-1hgbg84"),C(y,"class","icon tool-icon svelte-1hgbg84"),C(u,"class","tools svelte-1hgbg84"),C(i,"class","tooltip svelte-1hgbg84"),C(o,"class","container svelte-1hgbg84"),A(o,"left",t[0]+"px"),A(o,"top",t[1]+"px"),C(n,"class","svelte-1hgbg84")},m(e,l){g(e,n,l),p(n,o),p(o,i),p(i,r),p(i,s),p(i,a),t[21](a),p(i,c),p(i,u),p(u,d),p(u,h),p(u,f),p(u,b),p(u,y),p(o,_);for(let e=0;e<M.length;e+=1)M[e].m(o,null);p(n,$),E&&E.m(n,null),S||(U=[x(Jt,"mouseup",t[10]),x(Jt,"mousemove",t[9]),x(a,"change",t[20]),x(d,"click",t[22]),x(f,"click",t[18]),x(y,"click",t[11]),x(i,"mousedown",t[8])],S=!0)},p(e,[t]){if(168044&t){let n;for(G=e[2].current_project.inventory,n=0;n<G.length;n+=1){const l=Zt(e,G,n);M[n]?M[n].p(l,t):(M[n]=on(l),M[n].c(),M[n].m(o,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=G.length}1&t&&A(o,"left",e[0]+"px"),2&t&&A(o,"top",e[1]+"px"),e[4]?E?E.p(e,t):(E=rn(e),E.c(),E.m(n,null)):E&&(E.d(1),E=null)},i:e,o:e,d(e){e&&v(n),t[21](null),m(M,e),E&&E.d(),S=!1,l(U)}}}function an(e,t,n){let l;se.subscribe((e=>{n(2,l=e)}));let{left:o=100}=t,{top:i=200}=t,r=!1;let s=l.current_project.inventory,a=1,c=!1;function u(e){n(4,c=!c),n(3,a=e)}let d,h=!1,f="";function p(e){s[e],qe.createNewTab(e)}const g=e=>{let t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onload=e=>{let t=ae("gbk?data="+window.btoa(e.target.result));qe.addPlasmid(t)}};return e.$$set=e=>{"left"in e&&n(0,o=e.left),"top"in e&&n(1,i=e.top)},[o,i,l,a,c,h,f,d,function(){r=!0},function(e){r&&(n(0,o+=e.movementX),n(1,i+=e.movementY))},function(){r=!1},function(){let e=l;n(4,c=!1),e.show_filepicker=!1,se.set(e)},u,function(){let e=s[a],t=Object.assign({},e);qe.addItemToInventory(t)},function(){n(6,f=s[a].name),n(5,h=!0)},function(){n(5,h=!1),n(4,c=!1),qe.changeItemName(a,f)},function(){n(5,h=!1),n(4,c=!1),qe.deleteItemFromInventory(a)},p,function(){qe.addItemToInventory({name:"Unnamed lab",type:"text-editor",html:"",text:""})},g,e=>g(e),function(e){H[e?"unshift":"push"]((()=>{d=e,n(7,d)}))},()=>d.click(),function(){f=this.value,n(6,f)},e=>p(e),e=>u(e)]}class cn extends le{constructor(e){super(),ne(this,e,an,sn,i,{left:0,top:1})}}function un(t){let n,o,i,r,s;return{c(){n=w("h1"),n.textContent="Save",o=k(),i=w("h1"),i.textContent="Exit without saving",C(n,"class","item svelte-kc8i3q"),C(i,"class","item svelte-kc8i3q")},m(e,l){g(e,n,l),g(e,o,l),g(e,i,l),r||(s=[x(n,"click",t[5]),x(i,"click",t[2])],r=!0)},p:e,d(e){e&&v(n),e&&v(o),e&&v(i),r=!1,l(s)}}}function dn(t){let n,o,i,r,s;return{c(){n=w("h1"),n.textContent="Inventory",o=k(),i=w("h1"),i.textContent="Split window",C(n,"class","item svelte-kc8i3q"),C(i,"class","item svelte-kc8i3q")},m(e,l){g(e,n,l),g(e,o,l),g(e,i,l),r||(s=[x(n,"click",t[3]),x(i,"click",t[4])],r=!0)},p:e,d(e){e&&v(n),e&&v(o),e&&v(i),r=!1,l(s)}}}function hn(t){let n,o,i,r,s,a,c;return{c(){n=w("h1"),n.textContent="Go to NCBI",o=k(),i=w("h1"),i.textContent="Go to AddGene",r=k(),s=w("h1"),s.textContent="Go to UniProt",C(n,"class","item svelte-kc8i3q"),C(i,"class","item svelte-kc8i3q"),C(s,"class","item svelte-kc8i3q")},m(e,l){g(e,n,l),g(e,o,l),g(e,i,l),g(e,r,l),g(e,s,l),a||(c=[x(n,"click",t[6]),x(i,"click",t[7]),x(s,"click",t[8])],a=!0)},p:e,d(e){e&&v(n),e&&v(o),e&&v(i),e&&v(r),e&&v(s),a=!1,l(c)}}}function fn(t){let n,l,o,i,r,s,a,c,u=0==t[0]&&un(t),d=1==t[0]&&dn(t),h=2==t[0]&&hn(t);return{c(){n=w("main"),l=w("div"),o=k(),i=w("div"),u&&u.c(),r=k(),d&&d.c(),s=k(),h&&h.c(),C(l,"class","getoff svelte-kc8i3q"),C(i,"class","menu svelte-kc8i3q"),A(i,"left",90*t[0]+"px"),C(n,"class","svelte-kc8i3q")},m(e,f){g(e,n,f),p(n,l),p(n,o),p(n,i),u&&u.m(i,null),p(i,r),d&&d.m(i,null),p(i,s),h&&h.m(i,null),a||(c=x(l,"click",t[1]),a=!0)},p(e,[t]){0==e[0]?u?u.p(e,t):(u=un(e),u.c(),u.m(i,r)):u&&(u.d(1),u=null),1==e[0]?d?d.p(e,t):(d=dn(e),d.c(),d.m(i,s)):d&&(d.d(1),d=null),2==e[0]?h?h.p(e,t):(h=hn(e),h.c(),h.m(i,null)):h&&(h.d(1),h=null),1&t&&A(i,"left",90*e[0]+"px")},i:e,o:e,d(e){e&&v(n),u&&u.d(),d&&d.d(),h&&h.d(),a=!1,c()}}}function pn(e){window.open(e)}function gn(e,t,n){let l;re.subscribe((e=>{})),se.subscribe((e=>{l=e}));let{key:o=0}=t;return e.$$set=e=>{"key"in e&&n(0,o=e.key)},[o,function(){let e=l;e.show_menu=!1,se.set(e)},function(){re.set("HOME")},function(){let e=l;e.show_filepicker=!e.show_filepicker,se.set(e)},function(){let e=l;e.split_window=!e.split_window,se.set(e)},function(){let e=l.project_path,t=JSON.stringify(l.current_project),n=window.btoa(e+"|"+t);console.log(n),ae("save?data="+n),console.log("everything saved!")},()=>pn("https://www.ncbi.nlm.nih.gov/"),()=>pn("https://www.addgene.org/"),()=>pn("https://www.uniprot.org/")]}class vn extends le{constructor(e){super(),ne(this,e,gn,fn,i,{key:0})}}let mn={};const wn=(e,t=null)=>{document.execCommand(e,!1,t)},bn=(e,t)=>{if(t=t||(e&&e.tagName?[e.tagName]:[]),!e||!e.parentNode)return t;const n=(e=e.parentNode).tagName;return e.style&&e.getAttribute&&[e.style.textAlign||e.getAttribute("align"),e.style.color||"FONT"===n&&"forecolor",e.style.backgroundColor&&"backcolor"].filter((e=>e)).forEach((e=>t.push(e))),"DIV"===n?t:(t.push(n),bn(e,t).filter((e=>null!=e)))},kn=e=>{const t=document.getSelection();if(mn.range=null,t.rangeCount){let n,l=mn.range=t.getRangeAt(0),o=document.createRange();o.selectNodeContents(e),o.setEnd(l.startContainer,l.startOffset),n=(o+"").length,mn.metaRange={start:n,end:n+(l+"").length}}},xn=e=>{let t,n=mn.metaRange,l=mn.range,o=document.getSelection();if(l){if(n&&n.start!==n.end){let l,o=0,i=[e],r=!1,s=!1;for(t=document.createRange();!s&&(l=i.pop());)if(3===l.nodeType){let e=o+l.length;!r&&n.start>=o&&n.start<=e&&(t.setStart(l,n.start-o),r=!0),r&&n.end>=o&&n.end<=e&&(t.setEnd(l,n.end-o),s=!0),o=e}else{let e=l.childNodes,t=e.length;for(;t>0;)t-=1,i.push(e[t])}}o.removeAllRanges(),o.addRange(t||l)}},Cn=(e,t)=>{Array.from(e).forEach((e=>{t.some((t=>t===e.tagName.toLowerCase()))&&(e.children.length&&Cn(e.children,t),(e=>{const t=document.createDocumentFragment();for(;e.firstChild;){const n=e.removeChild(e.firstChild);t.appendChild(n)}e.parentNode.replaceChild(t,e)})(e))}))},yn=e=>Object.keys(e).map((t=>e[t])),_n=e=>(["style","script","applet","embed","noframes","noscript"].forEach((t=>{e=e.replace(new RegExp(`<${t}.*?${t}(.*?)>`,"gi"),"")})),e),An=(e,t)=>e===t||!!e.parentElement&&An(e.parentElement,t),$n='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z"></path><path d="M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z"></path></svg>';var Sn={viewHtml:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path fill="none" stroke="currentColor" stroke-width="8" stroke-miterlimit="10" d="M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9"></path></svg>',title:"View HTML",result:function(){let e=u(this.references),t=u(this.state).actionObj,n=u(this.helper);n.showEditor=!n.showEditor,e.editor.style.display=n.showEditor?"block":"none",e.raw.style.display=n.showEditor?"none":"block",n.showEditor?e.editor.innerHTML=e.raw.value:e.raw.value=e.editor.innerHTML,setTimeout((()=>{Object.keys(t).forEach((e=>t[e].disabled=!n.showEditor)),t.viewHtml.disabled=!1,t.viewHtml.active=!n.showEditor,this.state.update((e=>(e.actionBtns=yn(t),e.actionObj=t,e)))}))}},undo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z"></path></svg>',title:"Undo",result:()=>wn("undo")},redo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z"></path></svg>',title:"Redo",result:()=>wn("redo")},b:{icon:"<b>B</b>",title:"Bold",result:()=>wn("bold")},i:{icon:"<i>I</i>",title:"Italic",result:()=>wn("italic")},u:{icon:"<u>U</u>",title:"Underline",result:()=>wn("underline")},strike:{icon:"<strike>S</strike>",title:"Strike-through",result:()=>wn("strikeThrough")},sup:{icon:"A<sup>2</sup>",title:"Superscript",result:()=>wn("superscript")},sub:{icon:"A<sub>2</sub>",title:"Subscript",result:()=>wn("subscript")},h1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>wn("formatBlock","<H1>")},h2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>wn("formatBlock","<H2>")},p:{icon:"&#182;",title:"Paragraph",result:()=>wn("formatBlock","<P>")},blockquote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>wn("formatBlock","<BLOCKQUOTE>")},ol:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z"></path></svg>',title:"Ordered List",result:()=>wn("insertOrderedList")},ul:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z"></path></svg>',title:"Unordered List",result:()=>wn("insertUnorderedList")},hr:{icon:"&#8213;",title:"Horizontal Line",result:()=>wn("insertHorizontalRule")},left:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z"></path></svg>',title:"Justify left",result:()=>wn("justifyLeft")},right:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z"></path></svg>',title:"Justify right",result:()=>wn("justifyRight")},center:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z"></path></svg>',title:"Justify center",result:()=>wn("justifyCenter")},justify:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z"></path></svg>',title:"Justify full",result:()=>wn("justifyFull")},a:{icon:$n,title:"Insert link",result:function(){const e=u(this.state).actionObj,t=u(this.references);if(e.a.active){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(document.getSelection().focusNode),t.removeAllRanges(),t.addRange(n),wn("unlink"),e.a.title="Insert link",e.a.icon=$n,this.state.update((t=>(t.actionBtn=yn(e),t.actionObj=e,t)))}else kn(t.editor),t.modal.$set({show:!0,event:"linkUrl",title:"Insert link",label:"Url"}),u(this.helper).link||(this.helper.update((e=>(e.link=!0,e))),t.modal.$on("linkUrl",(n=>{xn(t.editor),wn("createLink",n.detail),e.a.title="Unlink",e.a.icon='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z"></path><path d="M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z"></path></svg>',this.state.update((t=>(t.actionBtn=yn(e),t.actionObj=e,t)))})))}},image:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M64 17v38H8V17h56m8-8H0v54h72V9z"></path><path d="M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z"></path></svg>',title:"Image",result:function(){const e=u(this.references);kn(e.editor),e.modal.$set({show:!0,event:"imageUrl",title:"Insert image",label:"Url"}),u(this.helper).image||(this.helper.update((e=>(e.image=!0,e))),e.modal.$on("imageUrl",(t=>{xn(e.editor),wn("insertImage",t.detail)})))}},forecolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z"></path></svg>',title:"Text color",colorPicker:!0,result:function(){Un.call(this,"foreColor")}},backcolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M36.5 22.3l-6.3 18.1H43l-6.3-18.1z"></path><path d="M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z"></path></svg>',title:"Background color",colorPicker:!0,result:function(){Un.call(this,"backColor")}},removeFormat:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z"></path></svg>',title:"Remove format",result:function(){const e=u(this.references),t=window.getSelection();if(!t.toString().length){Cn(e.editor.children,this.removeFormatTags);const n=document.createRange();n.selectNodeContents(e.editor),t.removeAllRanges(),t.addRange(n)}wn("removeFormat"),t.removeAllRanges()}}};const Un=function(e){const t=u(this.references);kn(t.editor),console.log(t.colorPicker),t.colorPicker.$set({show:!0,event:e}),u(this.helper)[e]||(this.helper.update((t=>(t[e]=!0,t))),t.colorPicker.$on(e,(n=>{let l=n.detail;if(l.modal){this.modal.$set({show:!0,event:"colorHref",title:"Text color",label:"foreColor"===e?"Text color":"Background color"});const n=e;u(this.helper)[`${n}Modal`]||(u(this.helper)[`${n}Modal`]=!0,this.modal.$on("colorHref",(e=>{let l=e.detail;xn(t.editor),wn(n,l)})))}else xn(t.editor),wn(e,l.color)})))};function Gn(e){let t;return{c(){t=w("span"),t.textContent="Required",C(t,"class","msg-error svelte-42yfje")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function Mn(t){let n,o,i,r,s,a,c,u,d,h,f,m,$,U,G,M,E,L,z,T,H,j,I=t[2]&&Gn();return{c(){n=w("div"),o=w("div"),i=k(),r=w("div"),s=w("div"),a=w("span"),c=b(t[3]),u=k(),d=w("form"),h=w("label"),f=w("input"),m=k(),$=w("span"),U=w("span"),G=b(t[4]),M=k(),I&&I.c(),E=k(),L=w("button"),L.textContent="Confirm",z=k(),T=w("button"),T.textContent="Cancel",C(o,"class","cl-editor-overlay svelte-42yfje"),C(a,"class","modal-title svelte-42yfje"),C(f,"type","text"),C(f,"name","text"),C(f,"class","svelte-42yfje"),C(U,"class","svelte-42yfje"),C($,"class","input-info svelte-42yfje"),C(h,"class","modal-label svelte-42yfje"),S(h,"input-error",t[2]),C(L,"class","modal-button modal-submit svelte-42yfje"),C(L,"type","submit"),C(T,"class","modal-button modal-reset svelte-42yfje"),C(T,"type","reset"),C(s,"class","modal-box svelte-42yfje"),C(r,"class","cl-editor-modal svelte-42yfje"),A(n,"display",t[0]?"block":"none")},m(e,l){var v;g(e,n,l),p(n,o),p(n,i),p(n,r),p(r,s),p(s,a),p(a,c),p(s,u),p(s,d),p(d,h),p(h,f),t[10](f),_(f,t[1]),p(h,m),p(h,$),p($,U),p(U,G),p($,M),I&&I.m($,null),p(d,E),p(d,L),p(d,z),p(d,T),H||(j=[x(o,"click",t[7]),x(f,"keyup",t[8]),x(f,"input",t[11]),x(T,"click",t[7]),x(d,"submit",(v=t[12],function(e){return e.preventDefault(),v.call(this,e)}))],H=!0)},p(e,[t]){8&t&&y(c,e[3]),2&t&&f.value!==e[1]&&_(f,e[1]),16&t&&y(G,e[4]),e[2]?I||(I=Gn(),I.c(),I.m($,null)):I&&(I.d(1),I=null),4&t&&S(h,"input-error",e[2]),1&t&&A(n,"display",e[0]?"block":"none")},i:e,o:e,d(e){e&&v(n),t[10](null),I&&I.d(),H=!1,l(j)}}}function En(e,t,n){let l=new z,{show:o=!1}=t,{text:i=""}=t,{event:r=""}=t,{title:s=""}=t,{label:a=""}=t,{error:c=!1}=t,u={};function d(){i?(console.log("dispatcher",i,r),l(r,i),h()):(n(2,c=!0),u.text.focus())}function h(){n(0,o=!1),n(1,i=""),n(2,c=!1)}return e.$$set=e=>{"show"in e&&n(0,o=e.show),"text"in e&&n(1,i=e.text),"event"in e&&n(9,r=e.event),"title"in e&&n(3,s=e.title),"label"in e&&n(4,a=e.label),"error"in e&&n(2,c=e.error)},e.$$.update=()=>{33&e.$$.dirty&&o&&setTimeout((()=>{u.text.focus()}))},[o,i,c,s,a,u,d,h,function(){n(2,c=!1)},r,function(e){H[e?"unshift":"push"]((()=>{u.text=e,n(5,u)}))},function(){i=this.value,n(1,i)},e=>d()]}class Ln extends le{constructor(e){super(),ne(this,e,En,Mn,i,{show:0,text:1,event:9,title:3,label:4,error:2})}get show(){return this.$$.ctx[0]}set show(e){this.$$set({show:e}),O()}get text(){return this.$$.ctx[1]}set text(e){this.$$set({text:e}),O()}get event(){return this.$$.ctx[9]}set event(e){this.$$set({event:e}),O()}get title(){return this.$$.ctx[3]}set title(e){this.$$set({title:e}),O()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),O()}get error(){return this.$$.ctx[2]}set error(e){this.$$set({error:e}),O()}}function zn(e,t,n){const l=e.slice();return l[9]=t[n],l}function Tn(e){let t,n,l,o,i=(e[9].text||"")+"";function r(...t){return e[5](e[9],...t)}return{c(){t=w("button"),n=b(i),C(t,"type","button"),C(t,"class","color-picker-btn svelte-njq4pk"),A(t,"background-color",e[9].color)},m(e,i){g(e,t,i),p(t,n),l||(o=x(t,"click",r),l=!0)},p(l,o){e=l,2&o&&i!==(i=(e[9].text||"")+"")&&y(n,i),2&o&&A(t,"background-color",e[9].color)},d(e){e&&v(t),l=!1,o()}}}function Hn(t){let n,l,o,i,r,s,a=t[1],c=[];for(let e=0;e<a.length;e+=1)c[e]=Tn(zn(t,a,e));return{c(){n=w("div"),l=w("div"),o=k(),i=w("div");for(let e=0;e<c.length;e+=1)c[e].c();C(l,"class","color-picker-overlay svelte-njq4pk"),C(i,"class","color-picker-wrapper svelte-njq4pk"),A(n,"display",t[0]?"block":"none")},m(e,a){g(e,n,a),p(n,l),p(n,o),p(n,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);r||(s=x(l,"click",t[2]),r=!0)},p(e,[t]){if(10&t){let n;for(a=e[1],n=0;n<a.length;n+=1){const l=zn(e,a,n);c[n]?c[n].p(l,t):(c[n]=Tn(l),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}1&t&&A(n,"display",e[0]?"block":"none")},i:e,o:e,d(e){e&&v(n),m(c,e),r=!1,s()}}}function jn(e,t,n){const l=new z,o=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"];let{show:i=!1}=t,{btns:r=[]}=t,{event:s=""}=t;function a(){n(0,i=!1)}function c(e){l(s,e),a()}E((()=>{n(1,r=(()=>{const e=o.map((e=>({color:`#${e}`})));return e.push({text:"#",modal:!0}),e})())}));return e.$$set=e=>{"show"in e&&n(0,i=e.show),"btns"in e&&n(1,r=e.btns),"event"in e&&n(4,s=e.event)},[i,r,a,c,s,(e,t)=>c(e)]}class In extends le{constructor(e){super(),ne(this,e,jn,Hn,i,{show:0,btns:1,event:4})}}const Fn=function(e){const{subscribe:t,set:n,update:l}=ie({actionBtns:[],actionObj:{}});return{name:e,set:n,update:l,subscribe:t}};function Nn(e,t,n){const l=e.slice();return l[37]=t[n],l}function Dn(e){let t,n,l,o,i,r,s,a,c=e[37].icon+"";function u(...t){return e[23](e[37],...t)}return{c(){t=w("button"),n=new U,l=k(),n.a=l,C(t,"type","button"),C(t,"class",o="cl-button "+(e[37].active?"active":"")+" svelte-1a534py"),C(t,"title",i=e[37].title),t.disabled=r=e[37].disabled},m(e,o){g(e,t,o),n.m(c,t),p(t,l),s||(a=x(t,"click",u),s=!0)},p(l,s){e=l,8&s[0]&&c!==(c=e[37].icon+"")&&n.p(c),8&s[0]&&o!==(o="cl-button "+(e[37].active?"active":"")+" svelte-1a534py")&&C(t,"class",o),8&s[0]&&i!==(i=e[37].title)&&C(t,"title",i),8&s[0]&&r!==(r=e[37].disabled)&&(t.disabled=r)},d(e){e&&v(t),s=!1,a()}}}function Pn(e){let t,n,o,i,r,s,a,c,u,d,h,f,b,y=e[3].actionBtns,_=[];for(let t=0;t<y.length;t+=1)_[t]=Dn(Nn(e,y,t));c=new Ln({props:{}}),e[30](c);return d=new In({props:{}}),e[31](d),{c(){t=w("div"),n=w("div");for(let e=0;e<_.length;e+=1)_[e].c();o=k(),i=w("div"),r=k(),s=w("textarea"),a=k(),J(c.$$.fragment),u=k(),J(d.$$.fragment),C(n,"class","cl-actionbar svelte-1a534py"),C(i,"id",e[1]),C(i,"class","cl-content svelte-1a534py"),A(i,"height",e[0]),C(i,"contenteditable","true"),C(s,"class","cl-textarea svelte-1a534py"),A(s,"max-height",e[0]),A(s,"min-height",e[0]),C(t,"class","cl svelte-1a534py")},m(l,v){g(l,t,v),p(t,n);for(let e=0;e<_.length;e+=1)_[e].m(n,null);p(t,o),p(t,i),e[24](i),p(t,r),p(t,s),e[29](s),p(t,a),Z(c,t,null),p(t,u),Z(d,t,null),e[32](t),h=!0,f||(b=[x(window,"click",e[22]),x(i,"input",e[25]),x(i,"mouseup",e[26]),x(i,"keyup",e[27]),x(i,"paste",e[28])],f=!0)},p(e,t){if(136&t[0]){let l;for(y=e[3].actionBtns,l=0;l<y.length;l+=1){const o=Nn(e,y,l);_[l]?_[l].p(o,t):(_[l]=Dn(o),_[l].c(),_[l].m(n,null))}for(;l<_.length;l+=1)_[l].d(1);_.length=y.length}(!h||2&t[0])&&C(i,"id",e[1]),(!h||1&t[0])&&A(i,"height",e[0]),(!h||1&t[0])&&A(s,"max-height",e[0]),(!h||1&t[0])&&A(s,"min-height",e[0]);c.$set({});d.$set({})},i(e){h||(Y(c.$$.fragment,e),Y(d.$$.fragment,e),h=!0)},o(e){Q(c.$$.fragment,e),Q(d.$$.fragment,e),h=!1},d(n){n&&v(t),m(_,n),e[24](null),e[29](null),e[30](null),ee(c),e[31](null),ee(d),e[32](null),f=!1,l(b)}}}const qn=[];function On(e,t,n){let l,o,i,r=new z,{actions:s=[]}=t,{height:a="300px"}=t,{html:c=""}=t,{contentId:u=""}=t,{removeFormatTags:h=["h1","h2","blockquote"]}=t,p=ie({foreColor:!1,backColor:!1,foreColorModal:!1,backColorModal:!1,image:!1,link:!1,showEditor:!0,blurActive:!1});d(e,p,(e=>n(33,o=e))),qn.push({});let g="editor_"+qn.length,v=Fn(g);d(e,v,(e=>n(3,i=e)));let m=ie({});d(e,m,(e=>n(2,l=e))),f(v,i.actionObj=((e,t=[])=>{if(t&&t.length){const n={};return t.forEach((t=>{"string"==typeof t?n[t]=Object.assign({},e[t]):e[t.name]?n[t.name]=Object.assign(e[t.name],t):n[t.name]=Object.assign({},t)})),n}return e})(Sn,s),i);let w={exec:_,getHtml:A,getText:$,setHtml:S,saveRange:U,restoreRange:G,helper:p,references:m,state:v,removeFormatTags:h};function b(e){l.editor.focus(),U(l.editor),G(l.editor),e.result.call(w),k()}function k(e){const t=e?[]:bn(document.getSelection().focusNode);Object.keys(i.actionObj).forEach((e=>f(v,i.actionObj[e].active=!1,i))),t.forEach((e=>(i.actionObj[e.toLowerCase()]||{}).active=!0)),f(v,i.actionBtns=yn(i.actionObj),i),v.set(i)}function x(e){e.preventDefault(),_("insertHTML",e.clipboardData.getData("text/html")?(e=>{const t=e.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);let n=t&&t[1]||e;return n=n.replace(/\r?\n|\r/g," ").replace(/<!--(.*?)-->/g,"").replace(new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font|w:sdt)(.*?)>","gi"),"").replace(/<!\[if !supportLists\]>(.*?)<!\[endif\]>/gi,"").replace(/style="[^"]*"/gi,"").replace(/style='[^']*'/gi,"").replace(/&nbsp;/gi," ").replace(/>(\s+)</g,"><").replace(/class="[^"]*"/gi,"").replace(/class='[^']*'/gi,"").replace(/<[^/].*?>/g,(e=>e.split(/[ >]/g)[0]+">")).trim(),n=_n(n),n})(e.clipboardData.getData("text/html")):e.clipboardData.getData("text"))}function C(e){r("change",e)}function y(e){!An(e.target,l.editorWrapper)&&o.blurActive&&r("blur",e),f(p,o.blurActive=!0,o)}function _(e,t){wn(e,t)}function A(e){return e?_n(l.editor.innerHTML):l.editor.innerHTML}function $(){return l.editor.innerText}function S(e,t){const n=t?_n(e):e||"";f(m,l.editor.innerHTML=n,l),f(m,l.raw.value=n,l)}function U(){kn(l.editor)}function G(){xn(l.editor)}!function(e,t){M().$$.context.set(e,t)}(g,w),E((()=>{f(v,i.actionBtns=yn(i.actionObj),i),S(c)}));const L=l;return e.$$set=e=>{"actions"in e&&n(12,s=e.actions),"height"in e&&n(0,a=e.height),"html"in e&&n(13,c=e.html),"contentId"in e&&n(1,u=e.contentId),"removeFormatTags"in e&&n(14,h=e.removeFormatTags)},[a,u,l,i,p,v,m,b,k,x,C,y,s,c,h,_,A,$,S,U,G,L,e=>y(e),(e,t)=>b(e),function(e){H[e?"unshift":"push"]((()=>{l.editor=e,m.set(l)}))},e=>C(e.target.innerHTML),()=>k(),()=>k(),e=>x(e),function(e){H[e?"unshift":"push"]((()=>{l.raw=e,m.set(l)}))},function(e){H[e?"unshift":"push"]((()=>{l.modal=e,m.set(l)}))},function(e){H[e?"unshift":"push"]((()=>{l.colorPicker=e,m.set(l)}))},function(e){H[e?"unshift":"push"]((()=>{l.editorWrapper=e,m.set(l)}))}]}class Vn extends le{constructor(e){super(),ne(this,e,On,Pn,i,{actions:12,height:0,html:13,contentId:1,removeFormatTags:14,exec:15,getHtml:16,getText:17,setHtml:18,saveRange:19,restoreRange:20,refs:21},null,[-1,-1])}get actions(){return this.$$.ctx[12]}set actions(e){this.$$set({actions:e}),O()}get height(){return this.$$.ctx[0]}set height(e){this.$$set({height:e}),O()}get html(){return this.$$.ctx[13]}set html(e){this.$$set({html:e}),O()}get contentId(){return this.$$.ctx[1]}set contentId(e){this.$$set({contentId:e}),O()}get removeFormatTags(){return this.$$.ctx[14]}set removeFormatTags(e){this.$$set({removeFormatTags:e}),O()}get exec(){return this.$$.ctx[15]}get getHtml(){return this.$$.ctx[16]}get getText(){return this.$$.ctx[17]}get setHtml(){return this.$$.ctx[18]}get saveRange(){return this.$$.ctx[19]}get restoreRange(){return this.$$.ctx[20]}get refs(){return this.$$.ctx[21]}}function Bn(e){let t,n,l,o={html:e[0],actions:["h1","h2","b","i","strike","ul","left","center","justify","undo","redo"]};return n=new Vn({props:o}),e[5](n),n.$on("change",e[6]),{c(){t=w("main"),J(n.$$.fragment),C(t,"class","svelte-t7vahp")},m(e,o){g(e,t,o),Z(n,t,null),l=!0},p(e,[t]){const l={};1&t&&(l.html=e[0]),n.$set(l)},i(e){l||(Y(n.$$.fragment,e),l=!0)},o(e){Q(n.$$.fragment,e),l=!1},d(l){l&&v(t),e[5](null),ee(n)}}}function Rn(e,t,n){let l,o,i,{inventory_id:r=0}=t;function s(e){let t=o;t.current_project.inventory[r].html=e.detail,se.set(t)}se.subscribe((e=>{n(4,o=e)})),E((()=>{i.setHtml(l)}));return e.$$set=e=>{"inventory_id"in e&&n(3,r=e.inventory_id)},e.$$.update=()=>{24&e.$$.dirty&&n(0,l=o.current_project.inventory[r].html),1&e.$$.dirty&&null!=i&&i.getHtml()!=l&&i.setHtml(l,1)},[l,i,s,r,o,function(e){H[e?"unshift":"push"]((()=>{i=e,n(1,i)}))},e=>s(e)]}class Kn extends le{constructor(e){super(),ne(this,e,Rn,Bn,i,{inventory_id:3})}}function Wn(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function Yn(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function Qn(e){let t,n;return t=new cn({}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Xn(e){let t,n;return t=new vn({props:{key:e[1]}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},p(e,n){const l={};2&n&&(l.key=e[1]),t.$set(l)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Jn(e){let t,n;return t=new it({props:{key:e[11],id:e[11],panel:"left",active:"left"==e[0].activePanel&&e[0].activeTab==e[11],text:e[9].name,icon_type:e[9].type}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.active="left"==e[0].activePanel&&e[0].activeTab==e[11]),1&n&&(l.text=e[9].name),1&n&&(l.icon_type=e[9].type),t.$set(l)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Zn(e){let t,n;return t=new it({props:{active:!0,text:"Empty Tab",icon_type:"empty"}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function el(e){let t,n;return t=new Xt({props:{src:e[0].current_project.inventory[e[0].left_panel.tabs[e[0].left_panel.current_tab].uuid]}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.src=e[0].current_project.inventory[e[0].left_panel.tabs[e[0].left_panel.current_tab].uuid]),t.$set(l)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function tl(e){let t,n;return t=new Kn({props:{inventory_id:e[0].left_panel.tabs[e[0].left_panel.current_tab].uuid}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.inventory_id=e[0].left_panel.tabs[e[0].left_panel.current_tab].uuid),t.$set(l)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function nl(e){let t,n,l,o,i,r,s=e[0].right_panel.tabs,a=[];for(let t=0;t<s.length;t+=1)a[t]=ll(Wn(e,s,t));const c=e=>Q(a[e],1,1,(()=>{a[e]=null}));let u=0==e[0].right_panel.tabs.length&&ol();return{c(){t=w("div"),n=w("div");for(let e=0;e<a.length;e+=1)a[e].c();l=k(),u&&u.c(),o=k(),i=w("div"),C(n,"class","tabs hide-native-scrollbar svelte-1h30ys2"),C(i,"class","panel svelte-1h30ys2"),C(t,"class","window svelte-1h30ys2")},m(e,s){g(e,t,s),p(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);p(n,l),u&&u.m(n,null),p(t,o),p(t,i),r=!0},p(e,t){if(1&t){let o;for(s=e[0].right_panel.tabs,o=0;o<s.length;o+=1){const i=Wn(e,s,o);a[o]?(a[o].p(i,t),Y(a[o],1)):(a[o]=ll(i),a[o].c(),Y(a[o],1),a[o].m(n,l))}for(K(),o=s.length;o<a.length;o+=1)c(o);W()}0==e[0].right_panel.tabs.length?u?1&t&&Y(u,1):(u=ol(),u.c(),Y(u,1),u.m(n,null)):u&&(K(),Q(u,1,1,(()=>{u=null})),W())},i(e){if(!r){for(let e=0;e<s.length;e+=1)Y(a[e]);Y(u),r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Q(a[e]);Q(u),r=!1},d(e){e&&v(t),m(a,e),u&&u.d()}}}function ll(e){let t,n;return t=new it({props:{id:e[11],panel:"right",active:"right"==e[0].activePanel&&e[0].activeTab==e[11],text:e[9].name,icon_type:e[9].type}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.active="right"==e[0].activePanel&&e[0].activeTab==e[11]),1&n&&(l.text=e[9].name),1&n&&(l.icon_type=e[9].type),t.$set(l)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function ol(e){let t,n;return t=new it({props:{active:!1,text:"Empty Tab",icon_type:"empty"}}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function il(e){let t,n,o,i,r,s,a,c,u,d,h,f,b,y,_,A,$,S,U,G,M,E=1==e[0].show_filepicker&&Qn(),L=1==e[0].show_menu&&Xn(e),z=e[0].left_panel.tabs,T=[];for(let t=0;t<z.length;t+=1)T[t]=Jn(Yn(e,z,t));const H=e=>Q(T[e],1,1,(()=>{T[e]=null}));let j=0==e[0].left_panel.tabs.length&&Zn(),I=null!=e[0].left_panel.tabs[e[0].left_panel.current_tab]&&"plasmid"==e[0].left_panel.tabs[e[0].left_panel.current_tab].type&&el(e),F=null!=e[0].left_panel.tabs[e[0].left_panel.current_tab]&&"text-editor"==e[0].left_panel.tabs[e[0].left_panel.current_tab].type&&tl(e),N=1==e[0].split_window&&nl(e);return{c(){t=w("main"),E&&E.c(),n=k(),o=w("div"),i=w("h1"),i.textContent="FILE",r=k(),s=w("h1"),s.textContent="VIEW",a=k(),c=w("h1"),c.textContent="HELP",u=k(),L&&L.c(),d=k(),h=w("div"),f=w("div"),b=w("div");for(let e=0;e<T.length;e+=1)T[e].c();y=k(),j&&j.c(),_=k(),A=w("div"),I&&I.c(),$=k(),F&&F.c(),S=k(),N&&N.c(),C(i,"class","menubar-item svelte-1h30ys2"),C(s,"class","menubar-item svelte-1h30ys2"),C(c,"class","menubar-item svelte-1h30ys2"),C(o,"class","menubar svelte-1h30ys2"),C(b,"class","tabs hide-native-scrollbar svelte-1h30ys2"),C(A,"class","panel svelte-1h30ys2"),C(f,"class","window svelte-1h30ys2"),C(h,"class","windows svelte-1h30ys2"),C(t,"class","svelte-1h30ys2")},m(l,v){g(l,t,v),E&&E.m(t,null),p(t,n),p(t,o),p(o,i),p(o,r),p(o,s),p(o,a),p(o,c),p(t,u),L&&L.m(t,null),p(t,d),p(t,h),p(h,f),p(f,b);for(let e=0;e<T.length;e+=1)T[e].m(b,null);p(b,y),j&&j.m(b,null),p(f,_),p(f,A),I&&I.m(A,null),p(A,$),F&&F.m(A,null),p(h,S),N&&N.m(h,null),U=!0,G||(M=[x(i,"click",e[3]),x(s,"click",e[4]),x(c,"click",e[5])],G=!0)},p(e,[l]){if(1==e[0].show_filepicker?E?1&l&&Y(E,1):(E=Qn(),E.c(),Y(E,1),E.m(t,n)):E&&(K(),Q(E,1,1,(()=>{E=null})),W()),1==e[0].show_menu?L?(L.p(e,l),1&l&&Y(L,1)):(L=Xn(e),L.c(),Y(L,1),L.m(t,d)):L&&(K(),Q(L,1,1,(()=>{L=null})),W()),1&l){let t;for(z=e[0].left_panel.tabs,t=0;t<z.length;t+=1){const n=Yn(e,z,t);T[t]?(T[t].p(n,l),Y(T[t],1)):(T[t]=Jn(n),T[t].c(),Y(T[t],1),T[t].m(b,y))}for(K(),t=z.length;t<T.length;t+=1)H(t);W()}0==e[0].left_panel.tabs.length?j?1&l&&Y(j,1):(j=Zn(),j.c(),Y(j,1),j.m(b,null)):j&&(K(),Q(j,1,1,(()=>{j=null})),W()),null!=e[0].left_panel.tabs[e[0].left_panel.current_tab]&&"plasmid"==e[0].left_panel.tabs[e[0].left_panel.current_tab].type?I?(I.p(e,l),1&l&&Y(I,1)):(I=el(e),I.c(),Y(I,1),I.m(A,$)):I&&(K(),Q(I,1,1,(()=>{I=null})),W()),null!=e[0].left_panel.tabs[e[0].left_panel.current_tab]&&"text-editor"==e[0].left_panel.tabs[e[0].left_panel.current_tab].type?F?(F.p(e,l),1&l&&Y(F,1)):(F=tl(e),F.c(),Y(F,1),F.m(A,null)):F&&(K(),Q(F,1,1,(()=>{F=null})),W()),1==e[0].split_window?N?(N.p(e,l),1&l&&Y(N,1)):(N=nl(e),N.c(),Y(N,1),N.m(h,null)):N&&(K(),Q(N,1,1,(()=>{N=null})),W())},i(e){if(!U){Y(E),Y(L);for(let e=0;e<z.length;e+=1)Y(T[e]);Y(j),Y(I),Y(F),Y(N),U=!0}},o(e){Q(E),Q(L),T=T.filter(Boolean);for(let e=0;e<T.length;e+=1)Q(T[e]);Q(j),Q(I),Q(F),Q(N),U=!1},d(e){e&&v(t),E&&E.d(),L&&L.d(),m(T,e),j&&j.d(),I&&I.d(),F&&F.d(),N&&N.d(),G=!1,l(M)}}}function rl(e,t,n){let l;se.subscribe((e=>{n(0,l=e)}));let o=0;function i(e){n(1,o=e);let t=l;t.show_menu=!0,se.set(t)}return[l,o,i,()=>i(0),()=>i(1),()=>i(2)]}class sl extends le{constructor(e){super(),ne(this,e,rl,il,i,{})}}function al(e){let t,n;return t=new Ze({}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function cl(e){let t,n;return t=new sl({}),{c(){J(t.$$.fragment)},m(e,l){Z(t,e,l),n=!0},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function ul(e){let t,n,l,o="HOME"==e[0]&&al(),i="EDITOR"==e[0]&&cl();return{c(){t=w("main"),o&&o.c(),n=k(),i&&i.c()},m(e,r){g(e,t,r),o&&o.m(t,null),p(t,n),i&&i.m(t,null),l=!0},p(e,[l]){"HOME"==e[0]?o?1&l&&Y(o,1):(o=al(),o.c(),Y(o,1),o.m(t,n)):o&&(K(),Q(o,1,1,(()=>{o=null})),W()),"EDITOR"==e[0]?i?1&l&&Y(i,1):(i=cl(),i.c(),Y(i,1),i.m(t,null)):i&&(K(),Q(i,1,1,(()=>{i=null})),W())},i(e){l||(Y(o),Y(i),l=!0)},o(e){Q(o),Q(i),l=!1},d(e){e&&v(t),o&&o.d(),i&&i.d()}}}function dl(e,t,n){let l;return re.subscribe((e=>{n(0,l=e)})),new qe,qe.getSettings(),[l]}return new class extends le{constructor(e){super(),ne(this,e,dl,ul,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
